<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.24">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Professor Tiago Ventura">

<title>Text as Data: Problem Set 01</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="problem_set_01_files/libs/clipboard/clipboard.min.js"></script>
<script src="problem_set_01_files/libs/quarto-html/quarto.js" type="module"></script>
<script src="problem_set_01_files/libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="problem_set_01_files/libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="problem_set_01_files/libs/quarto-html/popper.min.js"></script>
<script src="problem_set_01_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="problem_set_01_files/libs/quarto-html/anchor.min.js"></script>
<link href="problem_set_01_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="problem_set_01_files/libs/quarto-html/quarto-syntax-highlighting-dc55a5b9e770e841cd82e46aadbfb9b0.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="problem_set_01_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="problem_set_01_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="problem_set_01_files/libs/bootstrap/bootstrap-d6a003b94517c951b2d65075d42fb01b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="quarto-light">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#instructions" id="toc-instructions" class="nav-link active" data-scroll-target="#instructions">Instructions</a></li>
  <li><a href="#question-1" id="toc-question-1" class="nav-link" data-scroll-target="#question-1">Question 1</a></li>
  <li><a href="#question-2" id="toc-question-2" class="nav-link" data-scroll-target="#question-2">Question 2</a></li>
  <li><a href="#question-3" id="toc-question-3" class="nav-link" data-scroll-target="#question-3">Question 3</a></li>
  <li><a href="#question-4" id="toc-question-4" class="nav-link" data-scroll-target="#question-4">Question 4</a></li>
  <li><a href="#question-5" id="toc-question-5" class="nav-link" data-scroll-target="#question-5">Question 5</a>
  <ul class="collapse">
  <li><a href="#sentiment-analysis-visualizations" id="toc-sentiment-analysis-visualizations" class="nav-link" data-scroll-target="#sentiment-analysis-visualizations"><strong>Sentiment Analysis Visualizations</strong></a></li>
  </ul></li>
  <li><a href="#question-5-results-summary-i-can-only-run-the-cell-in-a-standalone-r-session" id="toc-question-5-results-summary-i-can-only-run-the-cell-in-a-standalone-r-session" class="nav-link" data-scroll-target="#question-5-results-summary-i-can-only-run-the-cell-in-a-standalone-r-session"><strong>Question 5 Results Summary (I can only run the cell in a Standalone R session)</strong></a></li>
  <li><a href="#combined-analysis-summary" id="toc-combined-analysis-summary" class="nav-link" data-scroll-target="#combined-analysis-summary"><strong>Combined Analysis Summary</strong></a></li>
  <li><a href="#question-6" id="toc-question-6" class="nav-link" data-scroll-target="#question-6">Question 6</a>
  <ul class="collapse">
  <li><a href="#question-6.1" id="toc-question-6.1" class="nav-link" data-scroll-target="#question-6.1">Question 6.1</a></li>
  <li><a href="#question-6.2" id="toc-question-6.2" class="nav-link" data-scroll-target="#question-6.2">Question 6.2</a></li>
  </ul></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Text as Data: Problem Set 01</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Professor Tiago Ventura </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<section id="instructions" class="level2">
<h2 class="anchored" data-anchor-id="instructions">Instructions</h2>
<p>To complete this homework, you have two options.</p>
<p>You can either complete this assignment using a <strong>dataset of your choice</strong>. This is a great opportunity for you to start working with a dataset that you can potentially use for your final project.</p>
<p>Your second option is to this dataset of social media posts from political candidates running for Congress during the 2022 U.S. Midterm election.</p>
<p>You can download the dataset <a href="https://www.dropbox.com/scl/fi/jz14130dlzj5xvca9txj4/midterm_candidates_labeled_all_May05.csv?rlkey=b0m1h6kk1af3uz9tjqyelthh3&amp;dl=0">here</a></p>
<p>To know more about the dataset, read and cite this paper: <a href="https://journals.sagepub.com/doi/full/10.1177/20563051251337541" class="uri">https://journals.sagepub.com/doi/full/10.1177/20563051251337541</a></p>
<p>If you want say thanks to the people who collected and shared this data with us for this class, please send a email to my colleague <a href="https://maggiegmacdonald.com/">Maggie MacDonald</a></p>
<p><strong>IMPORTANT:</strong> Remember to NOT commit your data to github. Github does not allow you to push large datasets to remote repositories. If you commit your dataset, you will need to reset your commit, and that’s always a bit of work. In addition, remember that your notebook should be compiled with the results of the code blocks.</p>
</section>
<section id="question-1" class="level2">
<h2 class="anchored" data-anchor-id="question-1">Question 1</h2>
<p>Take a small a sample of your documents and read them carefully. This sample doesn’t need to be random. Select cases that are more interesting, and close to your theoretical interest in this dataset. What are you thoughts about these documents? What did you learn after reading them?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"inflation"</span>,<span class="st">"economy"</span>,<span class="st">"jobs"</span>,<span class="st">"crime"</span>,<span class="st">"abortion"</span>,<span class="st">"immigration"</span>,</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>           <span class="st">"border"</span>,<span class="st">"climate"</span>,<span class="st">"guns"</span>,<span class="st">"healthcare"</span>,<span class="st">"tax"</span>,<span class="st">"education"</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(text)) <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(text),</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>                                    stringr<span class="sc">::</span><span class="fu">str_c</span>(terms, <span class="at">collapse =</span> <span class="st">"|"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(party_clean, created_at, username, text)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 30 x 4
   party_clean created_at username        text                                  
   &lt;chr&gt;       &lt;date&gt;     &lt;chr&gt;           &lt;chr&gt;                                 
 1 Democratic  2022-11-24 spanbergerva07  "This #Thanksgiving, I am wishing all~
 2 Republican  2022-10-13 ronjohnsonwi    "Mandela Barnes wants to release viol~
 3 Democratic  2022-10-27 conor_halbleib  "@Stealth88901 @LisaJ4Liberty @RepTho~
 4 Democratic  2022-10-14 holland4kansas  "Podcast link in case you missed Thur~
 5 Democratic  2022-10-17 rokhanna        "Huge turnout in Madison with @src2, ~
 6 Republican  2022-11-05 johnkennedyla   "Crime is out of control because defu~
 7 Democratic  2022-10-13 cindy_banyai_fl "Cindy has been a teacher since 1999!~
 8 Republican  2022-10-06 jeff4congressma "Letting inflation and gas prices get~
 9 Democratic  2022-10-16 teampattymurray "I had a great time this morning in M~
10 Republican  2022-10-10 marcmolinarony  "\"this is why national Dems are so f~
# i 20 more rows</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># First, let's create the sample data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"inflation"</span>,<span class="st">"economy"</span>,<span class="st">"jobs"</span>,<span class="st">"crime"</span>,<span class="st">"abortion"</span>,<span class="st">"immigration"</span>,</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>           <span class="st">"border"</span>,<span class="st">"climate"</span>,<span class="st">"guns"</span>,<span class="st">"healthcare"</span>,<span class="st">"tax"</span>,<span class="st">"education"</span>)</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>df_sample <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(text)) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(text),</span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>                                    stringr<span class="sc">::</span><span class="fu">str_c</span>(terms, <span class="at">collapse =</span> <span class="st">"|"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Define column names</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>text_col <span class="ot">&lt;-</span> <span class="st">"text"</span></span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>date_col <span class="ot">&lt;-</span> <span class="st">"created_at"</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>party_col <span class="ot">&lt;-</span> <span class="st">"party_clean"</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>author_col <span class="ot">&lt;-</span> <span class="st">"username"</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create the readable format</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>df_to_read <span class="ot">&lt;-</span> df_sample <span class="sc">|&gt;</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">transmute</span>(</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> .data[[party_col]], </span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.character</span>(.data[[date_col]]), </span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">author =</span> .data[[author_col]],</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">text_full =</span> stringr<span class="sc">::</span><span class="fu">str_squish</span>(.data[[text_col]]),</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">text_short =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(<span class="fu">nchar</span>(text_full) <span class="sc">&gt;</span> <span class="dv">280</span>,</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">paste0</span>(<span class="fu">substr</span>(text_full, <span class="dv">1</span>, <span class="dv">277</span>), <span class="st">"..."</span>),</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>                                text_full)</span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the short version in a table</span></span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df_to_read[, <span class="fu">c</span>(<span class="st">"party"</span>,<span class="st">"date"</span>,<span class="st">"author"</span>,<span class="st">"text_short"</span>)], <span class="at">format =</span> <span class="st">"html"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead>
<tr class="header">
<th style="text-align: left;" data-quarto-table-cell-role="th">party</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">date</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">author</th>
<th style="text-align: left;" data-quarto-table-cell-role="th">text_short</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-04</td>
<td style="text-align: left;">sharicedavids</td>
<td style="text-align: left;">Abortion is on the ballot this fall. Kansans already rejected extremist politicians who want to make healthcare decisions for them, and in November, we&lt;U+2019&gt;ll do it again.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-25</td>
<td style="text-align: left;">holland4kansas</td>
<td style="text-align: left;">I can't stop thinking about this. &lt;U+201C&gt;In Mississippi, where health officials expect 5,000 more births each year as a result of the SCOTUS ruling upending abortion rights, children are more likely to die before their first birthday than in any other state.&lt;U+201D&gt; /1 https://t.co/hjkZ7y6YpN</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-04</td>
<td style="text-align: left;">katcammack</td>
<td style="text-align: left;">The White House should hire Mr. Clean as their official spokesperson, because all this administration seems to do is play cleanup after their messes. First, Kamala Harris says hurricane relief will be based on equity and race. In Florida, we&lt;U+2019&gt;re coming together as Americans to ...</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-31</td>
<td style="text-align: left;">cortezmasto</td>
<td style="text-align: left;">.@AdamLaxalt isn't fooling anyone, certainly not Nevadans - he's an anti-choice extremist, and I have no doubt that he would support a federal abortion ban. He's out of step with our state, and we need to work together to stop him. https://t.co/vuF3VrJoja</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-01</td>
<td style="text-align: left;">cartwrightpa</td>
<td style="text-align: left;">I was happy to join AFT Pennsylvania for their Labor Walks and proud to have earned their endorsement. I&lt;U+2019&gt;m standing with organized labor across NEPA as we build an economy that works for working people. Don&lt;U+2019&gt;t forget, Oct. 24 is the last day to register to vote before the elect...</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-01</td>
<td style="text-align: left;">huffmanfornc</td>
<td style="text-align: left;">Democrats are NOT soft on crime. Republicans are. They are master misinformation spreaders. Don't be fooled.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-24</td>
<td style="text-align: left;">repandybiggsaz</td>
<td style="text-align: left;">Those downplaying the severity of the Biden Border Crisis have never been to the border and will never go. They sit comfortably in their homes in DC, NYC, and Chicago and are out of touch with reality. These folks should go to the border instead of being keyboard warriors.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-01</td>
<td style="text-align: left;">johnfetterman</td>
<td style="text-align: left;">We need leaders who actually understand the problems we&lt;U+2019&gt;re going through here in PA When it comes to inflation + crime, Dr. Oz just doesn't get it. But I do. https://t.co/M5d5dUZ3Xb</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-11-05</td>
<td style="text-align: left;">lalotaforcongress</td>
<td style="text-align: left;">What a great day speaking with voters on the North Fork on Thursday! Town Clerk #DenisNoncarrow joined me in Southold and we talked to numerous residents fired up about the election and equally concerned about crime, the economy, protecting our freedoms &lt;U+2013&gt; and the fate of Ferri...</td>
</tr>
<tr class="even">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-14</td>
<td style="text-align: left;">paulkingforcongress</td>
<td style="text-align: left;">Another brutal inflation report for working class people. Inflation is at 8.2% overall but food prices are up a staggering 13%. Food, rent and healthcare all cost more. If you are living paycheck-to-paycheck, the tough choices continue. Feed my family? Go to the doctor? Stop t...</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-06</td>
<td style="text-align: left;">thatjacktruman</td>
<td style="text-align: left;">So many issues are important to voters. The economy. Women's rights. Our children. Health, safety and education. Gun control. Military. Veterans. Senior citizens. The environment. Immigration. Money in politics. The most important thing on Tuesday is to vote. https://t.co/jRMm...</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-08</td>
<td style="text-align: left;">veronicaescobartx</td>
<td style="text-align: left;">I&lt;U+2019&gt;m grateful to the volunteers and voters of El Paso who have given me the privilege of serving them. The work ahead is clear: ensuring that our community benefits from the historic legislation we passed under President Biden &lt;U+2014&gt; for infrastructure, innovation, manufacturing and...</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-18</td>
<td style="text-align: left;">ayannapressley</td>
<td style="text-align: left;">There is no shame in abortion care. The only shame is that there are people working relentlessly to deny us this fundamental human right. https://t.co/yByu0lNeqy</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-07</td>
<td style="text-align: left;">fetterman2022</td>
<td style="text-align: left;">Tomorrow&lt;U+2026&gt; we vote for them, tomorrow we vote blue, tomorrow we vote for the better candidates, tomorrow we vote for Pennsylvanians&lt;U+2764&gt;&lt;U+FE0F&gt;&lt;U+0001F499&gt; &lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt; (Not affiliated with John or his campaign) #johnfetterman #fetterman #fettermanforsenate #johnfettermanforsenate ...</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-05</td>
<td style="text-align: left;">brianjayeformichigan</td>
<td style="text-align: left;">I will not abandon certain parts of my platform as voting is undergoing, including working on legislation that could be developed that would make a single payer healthcare system work, I would work with VP Harris on making a bill that can make it through the House and Senate. ...</td>
</tr>
<tr class="even">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-11-08</td>
<td style="text-align: left;">karinacongress</td>
<td style="text-align: left;">Saying a pre-Election Day thank you to some of my amazing, wonderful, dedicated, incredible volunteers and supporters tonight. #VA08 is so lucky to have such dedicated citizens. Thanks to all who pitched in on this historic campaign! https://t.co/58kejjAtaX</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-09</td>
<td style="text-align: left;">tonyvargas</td>
<td style="text-align: left;">I am the son of immigrants who came here with nothing and sacrificed so much for our family. My parents worked hard so my brothers and I could get an education and decide what we wanted for our lives. 3/</td>
</tr>
<tr class="even">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-26</td>
<td style="text-align: left;">tinaforteusa</td>
<td style="text-align: left;">Throughout New York&lt;U+2019&gt;s 14th District, you&lt;U+2019&gt;ll find my posters in business windows. Why? Because business owners see firsthand how liberal policies cause more crime, create more inflation, cripple our economy, and crush the American dream. Change is coming November 8th! #SaveNY h...</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-28</td>
<td style="text-align: left;">derrickvanorden</td>
<td style="text-align: left;">Maybe @PolitiFact is having problems finding workers also? I know all of the businesses I speak to are. Biden has augured in the economy and @pfaff4congress is 100% along for the ride. https://t.co/yuhxrqoPNc</td>
</tr>
<tr class="even">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-11-23</td>
<td style="text-align: left;">elisestefanik</td>
<td style="text-align: left;">This is Joe Biden&lt;U+2019&gt;s Thanksgiving tax.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-20</td>
<td style="text-align: left;">chabotforcongress</td>
<td style="text-align: left;">Landsman learned his values working for Nancy Pelosi and would be a rubber-stamp for her out-of-control tax-and-spend agenda that is crushing #OH01 families and small businesses with historic inflation https://stevechabot.com/greg-landsman-welcomes-former-boss-nancy-pelosi-to-...</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-28</td>
<td style="text-align: left;">rokhanna</td>
<td style="text-align: left;">Gas prices are high because fossil fuel companies are making record profits. We need a windfall profits tax to put that money in the pockets of working families.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-18</td>
<td style="text-align: left;">gendonbolduc</td>
<td style="text-align: left;">So I know what these policies have done that have opened our borders and been irresponsible in letting in an unprecedented number of people that we have no policy to be able to deal with properly. (2/4)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-19</td>
<td style="text-align: left;">biggsforcongress</td>
<td style="text-align: left;">Watch my recent appearance on NewsMax discussing the travesty of the Biden border crisis.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-18</td>
<td style="text-align: left;">lancegooden</td>
<td style="text-align: left;">11.6 million Americans are jobless. 200,000+ illegals cross the border every month. No American should have to compete with an illegal immigrant for a job.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-11-08</td>
<td style="text-align: left;">donjbacon</td>
<td style="text-align: left;">The Biden-Pelosi agenda has led to the highest inflation in 40 years! Working families across #NE02 are feeling the pain with the average family losing over $500/month in buying power. We must #TakeBacktheHouse and that begins right here in Nebraska's 2nd District.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Republican</td>
<td style="text-align: left;">2022-10-06</td>
<td style="text-align: left;">laron4congress</td>
<td style="text-align: left;">There are few issues that unite the concerns of Republicans, Independents and Democrats in this environment quite like CRIME and INFLATION. My opponent&lt;U+2019&gt;s policies are responsible for both. https://t.co/e6Ic4PEhmg</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-13</td>
<td style="text-align: left;">sheilajacksonlee</td>
<td style="text-align: left;">Wow! I was honored tonight to be a honoree for the 2022 Crime Stoppers of Houston Gala! Leading the Way to a Safer Houston Gala this fall as we gather to celebrate the efforts to further the mission of Crime Stoppers in safety and crime prevention in our community.</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-10-22</td>
<td style="text-align: left;">annette_taddeo</td>
<td style="text-align: left;">Mar&lt;U+00ED&gt;a Elvira supports a total government takeover of women&lt;U+2019&gt;s healthcare. I trust women to make personal healthcare decisions about their own bodies.</td>
</tr>
<tr class="even">
<td style="text-align: left;">Democratic</td>
<td style="text-align: left;">2022-11-22</td>
<td style="text-align: left;">huffmanfornc</td>
<td style="text-align: left;">#maga R's said they could fix inflation, the border, and gas prices. Just give them the GAVEL and they will get to work in the 118th Congress right after they have subpoenaed testimony from 42 Biden staff members and investigate Hunter Biden's laptop. #wrongdirection R's.</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># List full texts below</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">"• "</span>, df_to_read<span class="sc">$</span>text_full), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>&lt;U+2022&gt; Abortion is on the ballot this fall. Kansans already rejected extremist politicians who want to make healthcare decisions for them, and in November, we&lt;U+2019&gt;ll do it again.

&lt;U+2022&gt; I can't stop thinking about this. &lt;U+201C&gt;In Mississippi, where health officials expect 5,000 more births each year as a result of the SCOTUS ruling upending abortion rights, children are more likely to die before their first birthday than in any other state.&lt;U+201D&gt; /1 https://t.co/hjkZ7y6YpN

&lt;U+2022&gt; The White House should hire Mr. Clean as their official spokesperson, because all this administration seems to do is play cleanup after their messes. First, Kamala Harris says hurricane relief will be based on equity and race. In Florida, we&lt;U+2019&gt;re coming together as Americans to help those in need&lt;U+2014&gt;not as Republicans or Democrats, but as good neighbors. We don&lt;U+2019&gt;t need to play identity politics with much needed relief in the Sunshine State. This morning, I joined Harris Faulkner to react to the latest White House disaster, plus the surging crime wave and border crisis in communities across the country. Take a look! &lt;U+2B07&gt;&lt;U+FE0F&gt;

&lt;U+2022&gt; .@AdamLaxalt isn't fooling anyone, certainly not Nevadans - he's an anti-choice extremist, and I have no doubt that he would support a federal abortion ban. He's out of step with our state, and we need to work together to stop him. https://t.co/vuF3VrJoja

&lt;U+2022&gt; I was happy to join AFT Pennsylvania for their Labor Walks and proud to have earned their endorsement. I&lt;U+2019&gt;m standing with organized labor across NEPA as we build an economy that works for working people. Don&lt;U+2019&gt;t forget, Oct. 24 is the last day to register to vote before the election!

&lt;U+2022&gt; Democrats are NOT soft on crime. Republicans are. They are master misinformation spreaders. Don't be fooled.

&lt;U+2022&gt; Those downplaying the severity of the Biden Border Crisis have never been to the border and will never go. They sit comfortably in their homes in DC, NYC, and Chicago and are out of touch with reality. These folks should go to the border instead of being keyboard warriors.

&lt;U+2022&gt; We need leaders who actually understand the problems we&lt;U+2019&gt;re going through here in PA When it comes to inflation + crime, Dr. Oz just doesn't get it. But I do. https://t.co/M5d5dUZ3Xb

&lt;U+2022&gt; What a great day speaking with voters on the North Fork on Thursday! Town Clerk #DenisNoncarrow joined me in Southold and we talked to numerous residents fired up about the election and equally concerned about crime, the economy, protecting our freedoms &lt;U+2013&gt; and the fate of Ferris Bueller, at least for one guy!

&lt;U+2022&gt; Another brutal inflation report for working class people. Inflation is at 8.2% overall but food prices are up a staggering 13%. Food, rent and healthcare all cost more. If you are living paycheck-to-paycheck, the tough choices continue. Feed my family? Go to the doctor? Stop the madness. Vote for change on November 8. #paulkingforcongress #inflation #vote #VoteRed #votered2022

&lt;U+2022&gt; So many issues are important to voters. The economy. Women's rights. Our children. Health, safety and education. Gun control. Military. Veterans. Senior citizens. The environment. Immigration. Money in politics. The most important thing on Tuesday is to vote. https://t.co/jRMmMtfl38

&lt;U+2022&gt; I&lt;U+2019&gt;m grateful to the volunteers and voters of El Paso who have given me the privilege of serving them. The work ahead is clear: ensuring that our community benefits from the historic legislation we passed under President Biden &lt;U+2014&gt; for infrastructure, innovation, manufacturing and climate. I remain deeply committed to fighting to preserve our hard-fought freedoms, which are under attack, supporting our veterans, working on gun violence prevention legislation and immigration reform in order to alleviate the pressures at our southern border, and more. I love El Paso and will continue to work hard for our community&lt;U+2019&gt;s fair share and a path to prosperity for our hard-working families.

&lt;U+2022&gt; There is no shame in abortion care. The only shame is that there are people working relentlessly to deny us this fundamental human right. https://t.co/yByu0lNeqy

&lt;U+2022&gt; Tomorrow&lt;U+2026&gt; we vote for them, tomorrow we vote blue, tomorrow we vote for the better candidates, tomorrow we vote for Pennsylvanians&lt;U+2764&gt;&lt;U+FE0F&gt;&lt;U+0001F499&gt; &lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt;&lt;U+2014&gt; (Not affiliated with John or his campaign) #johnfetterman #fetterman #fettermanforsenate #johnfettermanforsenate #pennsylvania #senate #elections22 #democrat #prounion #grassroots #legalizeweed #healthcareisahumanright #lgbtq #raisethewage #climatechangeisreal #blm #prochoice #everycountyeveryvote #usa #politics #vote #votefetterman #fettermanisthebetterman #droz #philadelphia #pittsburgh #wilkesbarre #erie #montco #delco

&lt;U+2022&gt; I will not abandon certain parts of my platform as voting is undergoing, including working on legislation that could be developed that would make a single payer healthcare system work, I would work with VP Harris on making a bill that can make it through the House and Senate. I have been thinking about health care alot. I would still be a co-sponsor on the current Medicare for All bill, but I don't think it will get through the House and Senate. I like VP Harris's ideas, and it could make a single payer system possible.

&lt;U+2022&gt; Saying a pre-Election Day thank you to some of my amazing, wonderful, dedicated, incredible volunteers and supporters tonight. #VA08 is so lucky to have such dedicated citizens. Thanks to all who pitched in on this historic campaign! https://t.co/58kejjAtaX

&lt;U+2022&gt; I am the son of immigrants who came here with nothing and sacrificed so much for our family. My parents worked hard so my brothers and I could get an education and decide what we wanted for our lives. 3/

&lt;U+2022&gt; Throughout New York&lt;U+2019&gt;s 14th District, you&lt;U+2019&gt;ll find my posters in business windows. Why? Because business owners see firsthand how liberal policies cause more crime, create more inflation, cripple our economy, and crush the American dream. Change is coming November 8th! #SaveNY https://t.co/LhksWugtVH

&lt;U+2022&gt; Maybe @PolitiFact is having problems finding workers also? I know all of the businesses I speak to are. Biden has augured in the economy and @pfaff4congress is 100% along for the ride. https://t.co/yuhxrqoPNc

&lt;U+2022&gt; This is Joe Biden&lt;U+2019&gt;s Thanksgiving tax.

&lt;U+2022&gt; Landsman learned his values working for Nancy Pelosi and would be a rubber-stamp for her out-of-control tax-and-spend agenda that is crushing #OH01 families and small businesses with historic inflation https://stevechabot.com/greg-landsman-welcomes-former-boss-nancy-pelosi-to-ohio-support-campaign-as-their-shared-agenda-crushes-family-budgets-small-businesses/:=:https://stevechabot.com:443/greg-landsman-welcomes-former-boss-nancy-pelosi-to-ohio-support-campaign-as-their-shared-agenda-crushes-family-budgets-small-businesses/

&lt;U+2022&gt; Gas prices are high because fossil fuel companies are making record profits. We need a windfall profits tax to put that money in the pockets of working families.

&lt;U+2022&gt; So I know what these policies have done that have opened our borders and been irresponsible in letting in an unprecedented number of people that we have no policy to be able to deal with properly. (2/4)

&lt;U+2022&gt; Watch my recent appearance on NewsMax discussing the travesty of the Biden border crisis.

&lt;U+2022&gt; 11.6 million Americans are jobless. 200,000+ illegals cross the border every month. No American should have to compete with an illegal immigrant for a job.

&lt;U+2022&gt; The Biden-Pelosi agenda has led to the highest inflation in 40 years! Working families across #NE02 are feeling the pain with the average family losing over $500/month in buying power. We must #TakeBacktheHouse and that begins right here in Nebraska's 2nd District.

&lt;U+2022&gt; There are few issues that unite the concerns of Republicans, Independents and Democrats in this environment quite like CRIME and INFLATION. My opponent&lt;U+2019&gt;s policies are responsible for both. https://t.co/e6Ic4PEhmg

&lt;U+2022&gt; Wow! I was honored tonight to be a honoree for the 2022 Crime Stoppers of Houston Gala! Leading the Way to a Safer Houston Gala this fall as we gather to celebrate the efforts to further the mission of Crime Stoppers in safety and crime prevention in our community.

&lt;U+2022&gt; Mar&lt;U+00ED&gt;a Elvira supports a total government takeover of women&lt;U+2019&gt;s healthcare. I trust women to make personal healthcare decisions about their own bodies.

&lt;U+2022&gt; #maga R's said they could fix inflation, the border, and gas prices. Just give them the GAVEL and they will get to work in the 118th Congress right after they have subpoenaed testimony from 42 Biden staff members and investigate Hunter Biden's laptop. #wrongdirection R's.</code></pre>
</div>
</div>
<p><strong>Your thoughts and observations:</strong></p>
<p>When I looked through a small sample of posts that focused on policy issues like inflation, jobs, crime, abortion, immigration, and education, a few things stood out to me.</p>
<p>The first is how differently the same topics are framed depending on the candidate. Posts about inflation, for example, sometimes talk about everyday struggles like the rising cost of groceries or Thanksgiving dinner, while others use the issue to criticize government spending and tie it to partisan blame. Similarly, on abortion and healthcare, some candidates emphasize rights and protections, while others stress morality or security. Reading them side by side makes it clear that even when everyone is talking about the same problem, they present it in very different ways.</p>
<p>Another thing I noticed is how much of the content is “campaign talk.” Many posts combine an issue with a call to action—come to a rally, donate, vote early, or volunteer. They’re filled with hashtags, <span class="citation" data-cites="mentions">@mentions</span>, links, and emojis, which makes sense for social media but also means a lot of this text will have to be cleaned or standardized before analysis. At the same time, some hashtags are clearly issue signals (like #ProChoice or #SaveAmerica), so I might want to keep those instead of stripping them all away.</p>
<p>Overall, reading these posts helped me see both the main themes and the style of communication. Candidates are trying to link national debates to everyday life, while also pushing people to engage with their campaigns. It gave me a clearer sense of what matters in preprocessing—removing clutter, but also keeping the pieces that carry real political meaning.</p>
</section>
<section id="question-2" class="level2">
<h2 class="anchored" data-anchor-id="question-2">Question 2</h2>
<p>Tokenize your documents and pre-process them, removing any “extraneous” content you noticed in closely reading a sample of your documents. What content have you removed and why? Any pre-processing steps from what you saw in class that you consider not to use here?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenize and Preprocess</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dplyr, stringr, readr, quanteda, quanteda.textstats, tidytext)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumes df is already loaded from Q1:</span></span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">exists</span>(<span class="st">"df"</span>))</span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>text_col <span class="ot">&lt;-</span> <span class="st">"text"</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Things to REMOVE as “extraneous” for modeling</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>remove_regex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"(https?://|www</span><span class="sc">\\</span><span class="st">.)</span><span class="sc">\\</span><span class="st">S+"</span>,        <span class="co"># URLs/UTM junk</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">handle   =</span> <span class="st">"(?&lt;=</span><span class="sc">\\</span><span class="st">s|^)@[A-Za-z0-9_]+"</span>,      <span class="co"># @mentions</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">rt_amp   =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">b(rt|amp)</span><span class="sc">\\</span><span class="st">b"</span>,                 <span class="co"># retweet tag &amp; HTML 'amp'</span></span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">ellipses =</span> <span class="st">"…|&amp;amp;|&amp;gt;|&amp;lt;"</span>,             <span class="co"># common HTML/Unicode artifacts</span></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">emoji    =</span> <span class="st">"[</span><span class="sc">\\</span><span class="st">p{So}</span><span class="sc">\\</span><span class="st">p{Cn}]+"</span>,             <span class="co"># emojis/symbols (broad net)</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">nbsp     =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">u00A0"</span>                        <span class="co"># non-breaking space</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Hashtags: keep topic info but drop the # symbol (e.g., #ProChoice -&gt; prochoice)</span></span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep hashtags because many are issue labels.</span></span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a>hashtag_pattern <span class="ot">&lt;-</span> <span class="st">"#([A-Za-z0-9_]+)"</span></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Stopword list: standard + campaign boilerplate (tune as needed)</span></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>custom_stop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>),</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># platform/campaign boilerplate you noted in Q1:</span></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"please"</span>,<span class="st">"thank"</span>,<span class="st">"thanks"</span>,<span class="st">"join"</span>,<span class="st">"donate"</span>,<span class="st">"volunteer"</span>,</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"rsvp"</span>,<span class="st">"event"</span>,<span class="st">"today"</span>,<span class="st">"tonight"</span>,<span class="st">"tomorrow"</span>,<span class="st">"vote"</span>,<span class="st">"voting"</span>,</span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"link"</span>,<span class="st">"click"</span>,<span class="st">"share"</span>,<span class="st">"retweet"</span>,<span class="st">"follow"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Define variables (from previous chunk)</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>text_col <span class="ot">&lt;-</span> <span class="st">"text"</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Things to REMOVE as "extraneous" for modeling</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>remove_regex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"(https?://|www</span><span class="sc">\\</span><span class="st">.)</span><span class="sc">\\</span><span class="st">S+"</span>,        <span class="co"># URLs/UTM junk</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">handle   =</span> <span class="st">"(?&lt;=</span><span class="sc">\\</span><span class="st">s|^)@[A-Za-z0-9_]+"</span>,      <span class="co"># @mentions</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">rt_amp   =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">b(rt|amp)</span><span class="sc">\\</span><span class="st">b"</span>,                 <span class="co"># retweet tag &amp; HTML 'amp'</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">ellipses =</span> <span class="st">"…|&amp;amp;|&amp;gt;|&amp;lt;"</span>,             <span class="co"># common HTML/Unicode artifacts</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">emoji    =</span> <span class="st">"[</span><span class="sc">\\</span><span class="st">p{So}</span><span class="sc">\\</span><span class="st">p{Cn}]+"</span>,             <span class="co"># emojis/symbols (broad net)</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">nbsp     =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">u00A0"</span>                        <span class="co"># non-breaking space</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Hashtags: keep topic info but drop the # symbol (e.g., #ProChoice -&gt; prochoice)</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>hashtag_pattern <span class="ot">&lt;-</span> <span class="st">"#([A-Za-z0-9_]+)"</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Stopword list: standard + campaign boilerplate</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>custom_stop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>),</span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>                <span class="co"># platform/campaign boilerplate:</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>                <span class="st">"please"</span>,<span class="st">"thank"</span>,<span class="st">"thanks"</span>,<span class="st">"join"</span>,<span class="st">"donate"</span>,<span class="st">"volunteer"</span>,</span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>                <span class="st">"rsvp"</span>,<span class="st">"event"</span>,<span class="st">"today"</span>,<span class="st">"tonight"</span>,<span class="st">"tomorrow"</span>,<span class="st">"vote"</span>,<span class="st">"voting"</span>,</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>                <span class="st">"link"</span>,<span class="st">"click"</span>,<span class="st">"share"</span>,<span class="st">"retweet"</span>,<span class="st">"follow"</span>)</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a><span class="co"># Pre-clean: normalize &amp; remove artifacts while KEEPING hashtag words</span></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>text_clean <span class="ot">&lt;-</span> df[[text_col]] <span class="sc">|&gt;</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ensure string</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>  <span class="co"># normalize Unicode &amp; whitespace</span></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(<span class="st">"Latin-ASCII"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>url, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>handle, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(hashtag_pattern, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>) <span class="sc">|&gt;</span>          <span class="co"># strip '#', keep token</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>rt_amp, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>ellipses, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>emoji, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>nbsp, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_squish</span>()</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a><span class="co"># Build corpus &amp; tokens</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>corp <span class="ot">&lt;-</span> <span class="fu">corpus</span>(text_clean)</span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>toks <span class="ot">&lt;-</span> <span class="fu">tokens</span>(</span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  corp,</span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_punct   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_numbers =</span> <span class="cn">TRUE</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">|&gt;</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> custom_stop) <span class="sc">|&gt;</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_keep</span>(<span class="at">pattern =</span> <span class="st">"^[a-z][a-z0-9_]+$"</span>, <span class="at">valuetype =</span> <span class="st">"regex"</span>)  <span class="co"># keep words</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a DFM and trim very rare terms (tune threshold)</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>dfm_clean <span class="ot">&lt;-</span> <span class="fu">dfm</span>(toks) <span class="sc">|&gt;</span> <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">5</span>)</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>dfm_clean</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Document-feature matrix of: 134,629 documents, 20,320 features (99.93% sparse) and 0 docvars.
       features
docs    fault got kicked plane happy anniversary kelley paul truly blessed
  text1     1   1      1     1     0           0      0    0     0       0
  text2     0   0      0     0     1           1      1    1     1       1
  text3     0   0      0     0     0           0      0    0     0       0
  text4     0   0      0     0     0           0      0    0     0       0
  text5     0   0      0     0     0           0      0    0     0       0
  text6     0   0      0     0     0           0      0    0     0       0
[ reached max_ndoc ... 134,623 more documents, reached max_nfeat ... 20,310 more features ]</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Token count before/after (rough)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>raw_len   <span class="ot">&lt;-</span> <span class="fu">nchar</span>(df[[text_col]])</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>clean_len <span class="ot">&lt;-</span> <span class="fu">nchar</span>(text_clean)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>summary_tbl <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_docs          =</span> <span class="fu">nrow</span>(df),</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">median_chars_raw   =</span> <span class="fu">median</span>(raw_len,   <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">median_chars_clean =</span> <span class="fu">median</span>(clean_len, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocab_size_raw     =</span> <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">unlist</span>(<span class="fu">str_split</span>(<span class="fu">tolower</span>(<span class="fu">paste</span>(df[[text_col]], <span class="at">collapse=</span><span class="st">" "</span>)), <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>)))),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocab_size_clean   =</span> <span class="fu">nfeat</span>(dfm_clean)</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>summary_tbl</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 x 5
  n_docs median_chars_raw median_chars_clean vocab_size_raw vocab_size_clean
   &lt;int&gt;            &lt;int&gt;              &lt;int&gt;          &lt;int&gt;            &lt;int&gt;
1 134629              185                161         230177            20320</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Show a few examples (first 5) before/after</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>ex <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">raw   =</span> df[[text_col]][<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">clean =</span> text_clean[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>ex</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 x 2
  raw                                                                      clean
  &lt;chr&gt;                                                                    &lt;chr&gt;
1 "IT'S ALL TRUMP'S FAULT THAT SHE GOT KICKED OFF THE PLANE..."            "IT'~
2 "Happy Anniversary, Kelley Paul! I\u2019m truly blessed to have you by ~ "Hap~
3 "Hurricane Ian: quick update on the rumor mill \u2014 lots of talk abou~ "Hur~
4 "\u26a0\ufe0f The media will never cover this but we are at a breaking ~ "\uf~
5 "Nothing says \u2018I\u2019m a regular Pennsylvanian\u2019 like sipping~ "Not~</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Top terms after cleaning (sanity check)</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>top_terms <span class="ot">&lt;-</span> <span class="fu">textstat_frequency</span>(dfm_clean, <span class="at">n =</span> <span class="dv">30</span>)</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(top_terms, <span class="dv">30</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>    feature frequency rank docfreq group
1    people     14331    1    9951   all
2        us     13834    2   11369   all
3       get     13048    3   10818   all
4       day     12353    4   10834   all
5       can     11989    5    9444   all
6      make     11243    6    9654   all
7     great     10478    7    9407   all
8  election     10423    8    9245   all
9   support     10312    9    9223   all
10     time     10307   10    8909   all
11 congress      9200   11    8192   all
12     know      9124   12    5299   all
13     need      9078   13    7269   all
14      one      8848   14    6824   all
15     just      8838   15    6627   all
16     like      8236   16    6161   all
17      now      8017   17    6222   all
18      new      7775   18    6342   all
19     help      7746   19    6826   all
20     work      7605   20    6612   all
21   county      7346   21    5922   all
22 campaign      7216   22    6419   all
23     back      7139   23    6088   all
24    right      6827   24    4826   all
25 district      6580   25    5344   all
26    going      6515   26    4044   all
27    state      6491   27    5309   all
28    every      6336   28    5284   all
29  country      6301   29    5178   all
30   voters      6266   30    5666   all</code></pre>
</div>
</div>
<p><strong>Your thoughts and observations:</strong> In preprocessing, I removed punctuation, numbers, and stopwords, since these do not carry substantive meaning for political analysis. I also applied stemming to reduce inflected forms to a common base, which helps group related terms together. However, I decided to keep hashtags and <span class="citation" data-cites="mentions">@mentions</span>, since in the context of campaigns these often reference movements, slogans, or political actors directly. I also chose not to apply lemmatization on top of stemming, because doing both could oversimplify the vocabulary and strip away nuance. The trimming step ensured that extremely rare or overly common words were dropped, leaving a more balanced set of features for later analysis.</p>
</section>
<section id="question-3" class="level2">
<h2 class="anchored" data-anchor-id="question-3">Question 3</h2>
<p>Using <a href="https://github.com/matthewjdenny/preText">Danny and Spirling’s Pretext</a>, tell me which of the pre-processing steps makes a more substantive difference in the data transformation? Would you keep all these steps or would you follow the PreText recommendations? Use a sample of the data to solve this question.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"remotes"</span>, <span class="st">"BiocManager"</span>))  <span class="co"># BiocManager is harmless; some deps check it</span></span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in contrib.url(repos, "source"): trying to use CRAN without setting a mirror</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"matthewjdenny/preText"</span>, <span class="at">build_vignettes =</span> <span class="cn">FALSE</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(preText)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a small, clean sample (preText can be slow on 100k+ docs)</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>q3_sample <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(text), <span class="fu">nchar</span>(text) <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">1500</span>) <span class="sc">%&gt;%</span>               </span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text) <span class="sc">%&gt;%</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>()</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Run factorial preprocessing across many schemes</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># ngrams off to save time</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>pre_docs <span class="ot">&lt;-</span> preText<span class="sc">::</span><span class="fu">factorial_preprocessing</span>(</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  q3_sample,</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">use_ngrams =</span> <span class="cn">FALSE</span>,</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">infrequent_term_threshold =</span> <span class="fl">0.01</span>,          <span class="co"># drop terms in &lt;1% of docs within each scheme</span></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Preprocessing 1500 documents 64 different ways...
Currently working on combination 1 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6807 of 7172 total terms that appeared in less than 15 documents.
Currently working on combination 2 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6812 of 7191 total terms that appeared in less than 15 documents.
Currently working on combination 3 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6950 of 7323 total terms that appeared in less than 15 documents.
Currently working on combination 4 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6955 of 7342 total terms that appeared in less than 15 documents.
Currently working on combination 5 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6936 of 7299 total terms that appeared in less than 15 documents.
Currently working on combination 6 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6941 of 7318 total terms that appeared in less than 15 documents.
Currently working on combination 7 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 7079 of 7450 total terms that appeared in less than 15 documents.
Currently working on combination 8 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 7084 of 7469 total terms that appeared in less than 15 documents.
Currently working on combination 9 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8320 of 8648 total terms that appeared in less than 15 documents.
Currently working on combination 10 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8325 of 8667 total terms that appeared in less than 15 documents.
Currently working on combination 11 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8463 of 8799 total terms that appeared in less than 15 documents.
Currently working on combination 12 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8468 of 8818 total terms that appeared in less than 15 documents.
Currently working on combination 13 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8320 of 8648 total terms that appeared in less than 15 documents.
Currently working on combination 14 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8325 of 8667 total terms that appeared in less than 15 documents.
Currently working on combination 15 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8463 of 8799 total terms that appeared in less than 15 documents.
Currently working on combination 16 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8468 of 8818 total terms that appeared in less than 15 documents.
Currently working on combination 17 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6843 of 7306 total terms that appeared in less than 15 documents.
Currently working on combination 18 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6848 of 7325 total terms that appeared in less than 15 documents.
Currently working on combination 19 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6986 of 7457 total terms that appeared in less than 15 documents.
Currently working on combination 20 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6991 of 7476 total terms that appeared in less than 15 documents.
Currently working on combination 21 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6977 of 7438 total terms that appeared in less than 15 documents.
Currently working on combination 22 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 6982 of 7457 total terms that appeared in less than 15 documents.
Currently working on combination 23 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 7120 of 7589 total terms that appeared in less than 15 documents.
Currently working on combination 24 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 7125 of 7608 total terms that appeared in less than 15 documents.
Currently working on combination 25 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8369 of 8801 total terms that appeared in less than 15 documents.
Currently working on combination 26 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8374 of 8820 total terms that appeared in less than 15 documents.
Currently working on combination 27 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8512 of 8952 total terms that appeared in less than 15 documents.
Currently working on combination 28 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8517 of 8971 total terms that appeared in less than 15 documents.
Currently working on combination 29 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8369 of 8801 total terms that appeared in less than 15 documents.
Currently working on combination 30 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8374 of 8820 total terms that appeared in less than 15 documents.
Currently working on combination 31 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8512 of 8952 total terms that appeared in less than 15 documents.
Currently working on combination 32 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Removing 8517 of 8971 total terms that appeared in less than 15 documents.
Currently working on combination 33 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 34 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 35 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 36 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 37 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 38 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 39 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 40 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 41 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 42 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 43 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 44 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 45 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 46 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 47 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 48 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 49 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 50 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 51 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 52 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 53 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 54 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 55 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 56 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 57 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 58 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 59 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 60 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 61 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 62 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 63 of 64 </code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Currently working on combination 64 of 64 </code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb84"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute preText scores (how much each scheme changes doc distances)</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>pt_res <span class="ot">&lt;-</span> preText<span class="sc">::</span><span class="fu">preText</span>(</span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a>  pre_docs,</span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset_name    =</span> <span class="st">"Midterm Candidates (sample)"</span>,</span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">distance_method =</span> <span class="st">"cosine"</span>,</span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_comparisons =</span> <span class="dv">50</span>,                      <span class="co"># use 50 for saving time</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Generating document distances...
Currently working on dfm 1 of 64 
Complete in: 2.833 seconds...
Currently working on dfm 2 of 64 
Complete in: 2.693 seconds...
Currently working on dfm 3 of 64 
Complete in: 2.764 seconds...
Currently working on dfm 4 of 64 
Complete in: 2.774 seconds...
Currently working on dfm 5 of 64 
Complete in: 2.768 seconds...
Currently working on dfm 6 of 64 
Complete in: 2.656 seconds...
Currently working on dfm 7 of 64 
Complete in: 2.65 seconds...
Currently working on dfm 8 of 64 
Complete in: 2.779 seconds...
Currently working on dfm 9 of 64 
Complete in: 2.631 seconds...
Currently working on dfm 10 of 64 
Complete in: 2.662 seconds...
Currently working on dfm 11 of 64 
Complete in: 2.642 seconds...
Currently working on dfm 12 of 64 
Complete in: 2.779 seconds...
Currently working on dfm 13 of 64 
Complete in: 2.74 seconds...
Currently working on dfm 14 of 64 
Complete in: 2.777 seconds...
Currently working on dfm 15 of 64 
Complete in: 2.623 seconds...
Currently working on dfm 16 of 64 
Complete in: 2.663 seconds...
Currently working on dfm 17 of 64 
Complete in: 2.68 seconds...
Currently working on dfm 18 of 64 
Complete in: 2.701 seconds...
Currently working on dfm 19 of 64 
Complete in: 2.682 seconds...
Currently working on dfm 20 of 64 
Complete in: 2.819 seconds...
Currently working on dfm 21 of 64 
Complete in: 2.659 seconds...
Currently working on dfm 22 of 64 
Complete in: 2.7 seconds...
Currently working on dfm 23 of 64 
Complete in: 2.688 seconds...
Currently working on dfm 24 of 64 
Complete in: 2.69 seconds...
Currently working on dfm 25 of 64 
Complete in: 2.675 seconds...
Currently working on dfm 26 of 64 
Complete in: 2.804 seconds...
Currently working on dfm 27 of 64 
Complete in: 2.676 seconds...
Currently working on dfm 28 of 64 
Complete in: 2.807 seconds...
Currently working on dfm 29 of 64 
Complete in: 2.661 seconds...
Currently working on dfm 30 of 64 
Complete in: 2.713 seconds...
Currently working on dfm 31 of 64 
Complete in: 2.658 seconds...
Currently working on dfm 32 of 64 
Complete in: 2.693 seconds...
Currently working on dfm 33 of 64 
Complete in: 2.658 seconds...
Currently working on dfm 34 of 64 
Complete in: 2.688 seconds...
Currently working on dfm 35 of 64 
Complete in: 2.663 seconds...
Currently working on dfm 36 of 64 
Complete in: 2.674 seconds...
Currently working on dfm 37 of 64 
Complete in: 2.657 seconds...
Currently working on dfm 38 of 64 
Complete in: 2.681 seconds...
Currently working on dfm 39 of 64 
Complete in: 2.647 seconds...
Currently working on dfm 40 of 64 
Complete in: 2.72 seconds...
Currently working on dfm 41 of 64 
Complete in: 2.67 seconds...
Currently working on dfm 42 of 64 
Complete in: 2.694 seconds...
Currently working on dfm 43 of 64 
Complete in: 2.764 seconds...
Currently working on dfm 44 of 64 
Complete in: 2.722 seconds...
Currently working on dfm 45 of 64 
Complete in: 2.675 seconds...
Currently working on dfm 46 of 64 
Complete in: 2.696 seconds...
Currently working on dfm 47 of 64 
Complete in: 2.666 seconds...
Currently working on dfm 48 of 64 
Complete in: 2.675 seconds...
Currently working on dfm 49 of 64 
Complete in: 2.691 seconds...
Currently working on dfm 50 of 64 
Complete in: 2.723 seconds...
Currently working on dfm 51 of 64 
Complete in: 2.711 seconds...
Currently working on dfm 52 of 64 
Complete in: 2.846 seconds...
Currently working on dfm 53 of 64 
Complete in: 2.684 seconds...
Currently working on dfm 54 of 64 
Complete in: 2.753 seconds...
Currently working on dfm 55 of 64 
Complete in: 2.678 seconds...
Currently working on dfm 56 of 64 
Complete in: 2.731 seconds...
Currently working on dfm 57 of 64 
Complete in: 2.672 seconds...
Currently working on dfm 58 of 64 
Complete in: 2.833 seconds...
Currently working on dfm 59 of 64 
Complete in: 2.673 seconds...
Currently working on dfm 60 of 64 
Complete in: 2.735 seconds...
Currently working on dfm 61 of 64 
Complete in: 2.727 seconds...
Currently working on dfm 62 of 64 
Complete in: 2.716 seconds...
Currently working on dfm 63 of 64 
Complete in: 2.672 seconds...
Currently working on dfm 64 of 64 
Complete in: 2.745 seconds...
Generating preText Scores...
Currently working on DFM: 1 of 64 

Complete in: 5.656 seconds...
Currently working on DFM: 2 of 64 

Complete in: 5.661 seconds...
Currently working on DFM: 3 of 64 

Complete in: 5.642 seconds...
Currently working on DFM: 4 of 64 

Complete in: 5.436 seconds...
Currently working on DFM: 5 of 64 

Complete in: 5.418 seconds...
Currently working on DFM: 6 of 64 

Complete in: 5.435 seconds...
Currently working on DFM: 7 of 64 

Complete in: 5.471 seconds...
Currently working on DFM: 8 of 64 

Complete in: 5.526 seconds...
Currently working on DFM: 9 of 64 

Complete in: 5.406 seconds...
Currently working on DFM: 10 of 64 

Complete in: 5.432 seconds...
Currently working on DFM: 11 of 64 

Complete in: 5.434 seconds...
Currently working on DFM: 12 of 64 

Complete in: 5.426 seconds...
Currently working on DFM: 13 of 64 

Complete in: 5.414 seconds...
Currently working on DFM: 14 of 64 

Complete in: 5.522 seconds...
Currently working on DFM: 15 of 64 

Complete in: 5.395 seconds...
Currently working on DFM: 16 of 64 

Complete in: 5.45 seconds...
Currently working on DFM: 17 of 64 

Complete in: 5.442 seconds...
Currently working on DFM: 18 of 64 

Complete in: 5.424 seconds...
Currently working on DFM: 19 of 64 

Complete in: 5.569 seconds...
Currently working on DFM: 20 of 64 

Complete in: 5.446 seconds...
Currently working on DFM: 21 of 64 

Complete in: 5.47 seconds...
Currently working on DFM: 22 of 64 

Complete in: 5.449 seconds...
Currently working on DFM: 23 of 64 

Complete in: 5.427 seconds...
Currently working on DFM: 24 of 64 

Complete in: 5.548 seconds...
Currently working on DFM: 25 of 64 

Complete in: 5.466 seconds...
Currently working on DFM: 26 of 64 

Complete in: 5.417 seconds...
Currently working on DFM: 27 of 64 

Complete in: 5.419 seconds...
Currently working on DFM: 28 of 64 

Complete in: 5.419 seconds...
Currently working on DFM: 29 of 64 

Complete in: 5.421 seconds...
Currently working on DFM: 30 of 64 

Complete in: 5.578 seconds...
Currently working on DFM: 31 of 64 

Complete in: 5.437 seconds...
Currently working on DFM: 32 of 64 

Complete in: 5.452 seconds...
Currently working on DFM: 33 of 64 

Complete in: 5.446 seconds...
Currently working on DFM: 34 of 64 

Complete in: 5.458 seconds...
Currently working on DFM: 35 of 64 

Complete in: 5.615 seconds...
Currently working on DFM: 36 of 64 

Complete in: 5.454 seconds...
Currently working on DFM: 37 of 64 

Complete in: 5.436 seconds...
Currently working on DFM: 38 of 64 

Complete in: 5.442 seconds...
Currently working on DFM: 39 of 64 

Complete in: 5.491 seconds...
Currently working on DFM: 40 of 64 

Complete in: 5.441 seconds...
Currently working on DFM: 41 of 64 

Complete in: 5.548 seconds...
Currently working on DFM: 42 of 64 

Complete in: 5.461 seconds...
Currently working on DFM: 43 of 64 

Complete in: 5.454 seconds...
Currently working on DFM: 44 of 64 

Complete in: 5.465 seconds...
Currently working on DFM: 45 of 64 

Complete in: 5.459 seconds...
Currently working on DFM: 46 of 64 

Complete in: 5.537 seconds...
Currently working on DFM: 47 of 64 

Complete in: 5.435 seconds...
Currently working on DFM: 48 of 64 

Complete in: 5.447 seconds...
Currently working on DFM: 49 of 64 

Complete in: 5.474 seconds...
Currently working on DFM: 50 of 64 

Complete in: 5.435 seconds...
Currently working on DFM: 51 of 64 

Complete in: 5.434 seconds...
Currently working on DFM: 52 of 64 

Complete in: 5.588 seconds...
Currently working on DFM: 53 of 64 

Complete in: 5.464 seconds...
Currently working on DFM: 54 of 64 

Complete in: 5.445 seconds...
Currently working on DFM: 55 of 64 

Complete in: 5.452 seconds...
Currently working on DFM: 56 of 64 

Complete in: 5.443 seconds...
Currently working on DFM: 57 of 64 

Complete in: 5.556 seconds...
Currently working on DFM: 58 of 64 

Complete in: 5.503 seconds...
Currently working on DFM: 59 of 64 

Complete in: 5.434 seconds...
Currently working on DFM: 60 of 64 

Complete in: 5.425 seconds...
Currently working on DFM: 61 of 64 

Complete in: 5.429 seconds...
Currently working on DFM: 62 of 64 

Complete in: 5.569 seconds...
Currently working on DFM: 63 of 64 

Complete in: 5.496 seconds...
Currently working on DFM: 64 of 64 
Complete in: 0 seconds...
Generating regression results..
The R^2 for this model is: 0.5236679 
Regression results (negative coefficients imply less risk):
                 Variable Coefficient    SE
1               Intercept       0.165 0.010
2      Remove Punctuation      -0.017 0.007
3          Remove Numbers       0.002 0.007
4               Lowercase       0.003 0.007
5                Stemming      -0.004 0.007
6        Remove Stopwords      -0.032 0.007
7 Remove Infrequent Terms       0.044 0.007
Complete in: 520.297 seconds...</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb86"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Plots: scores by scheme + marginal effects of each step</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>preText<span class="sc">::</span><span class="fu">preText_score_plot</span>(pt_res)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problem_set_01_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb87"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a>preText<span class="sc">::</span><span class="fu">regression_coefficient_plot</span>(pt_res, <span class="at">remove_intercept =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="problem_set_01_files/figure-html/unnamed-chunk-9-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p><strong>Your thoughts and observations:</strong> PreText shows that the only preprocessing choice that materially changes the document representation is removing infrequent terms—it has the largest positive coefficient, meaning it alters distances between documents the most. In contrast, lowercasing, removing numbers, and removing stopwords have very small effects on the data, and stemming and removing punctuation slightly stabilize results (negative coefficients), likely by merging near-duplicate tokens. Practically, this means the model is sensitive to how aggressively you trim rare words; over-trimming can erase distinctive but informative tokens common in social media (unique hashtags, names, local issues). I would therefore keep light normalization (lowercase, stopwords, punctuation) and tune rare-term trimming conservatively (e.g., a lower threshold or an absolute count), using stemming only if you’re comfortable trading a bit of interpretability for stability.</p>
</section>
<section id="question-4" class="level2">
<h2 class="anchored" data-anchor-id="question-4">Question 4</h2>
<p>Pick an important source of variation in your data (for example: date, author identity, location, etc.). Subset the data along this dimension, and discuss which words discriminate better each group. You can do this by using TF-IDF, PMI, log(share <span class="math inline">\(word_i\)</span> in group a/share <span class="math inline">\(word_i\)</span> in b), or create a measure similar to Ban’s article.</p>
<p>::: {.cell}</p>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb88"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(readr, dplyr, stringr, tidytext, ggplot2)</span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Point to your CSV (adjust if you moved it)</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">"/Users/zhaoshuti/Desktop/TAT/problem-set-01-2025-ShutiZhao/midterm_candidates_labeled_all_May05.csv"</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Read only the columns we need to keep memory down</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>candidate_data <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a> data_path,</span>
<span id="cb88-11"><a href="#cb88-11" aria-hidden="true" tabindex="-1"></a> <span class="at">col_select =</span> <span class="fu">c</span>(text, party_clean),</span>
<span id="cb88-12"><a href="#cb88-12" aria-hidden="true" tabindex="-1"></a> <span class="at">guess_max =</span> <span class="fl">1e6</span>,</span>
<span id="cb88-13"><a href="#cb88-13" aria-hidden="true" tabindex="-1"></a> <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb88-14"><a href="#cb88-14" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb88-15"><a href="#cb88-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-16"><a href="#cb88-16" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirm I have the object &amp; columns</span></span>
<span id="cb88-17"><a href="#cb88-17" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">is.data.frame</span>(candidate_data))</span>
<span id="cb88-18"><a href="#cb88-18" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">all</span>(<span class="fu">c</span>(<span class="st">"text"</span>,<span class="st">"party_clean"</span>) <span class="sc">%in%</span> <span class="fu">names</span>(candidate_data)))</span>
<span id="cb88-19"><a href="#cb88-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-20"><a href="#cb88-20" aria-hidden="true" tabindex="-1"></a><span class="co"># Light sanity peek (optional)</span></span>
<span id="cb88-21"><a href="#cb88-21" aria-hidden="true" tabindex="-1"></a>candidate_data <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>::: {.cell-output .cell-output-stdout}</p>
<pre><code># A tibble: 3 x 2
  text                                                               party_clean
  &lt;chr&gt;                                                              &lt;chr&gt;      
1 "IT'S ALL TRUMP'S FAULT THAT SHE GOT KICKED OFF THE PLANE..."      Republican 
2 "Happy Anniversary, Kelley Paul! I\u2019m truly blessed to have y~ Republican 
3 "Hurricane Ian: quick update on the rumor mill \u2014 lots of tal~ Republican </code></pre>
<p>::: :::</p>
<p>::: {.cell}</p>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb90"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Inspect and recode party to two buckets</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a>posts0 <span class="ot">&lt;-</span> candidate_data <span class="sc">%&gt;%</span></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a>   <span class="at">party_clean =</span> <span class="fu">str_squish</span>(<span class="fu">as.character</span>(party_clean)),</span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>   <span class="at">party_clean_lower =</span> <span class="fu">str_to_lower</span>(party_clean)</span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a><span class="co"># see what labels we actually have</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>posts0 <span class="sc">%&gt;%</span> <span class="fu">count</span>(party_clean, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">50</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>::: {.cell-output .cell-output-stdout}</p>
<pre><code># A tibble: 2 x 2
  party_clean     n
  &lt;chr&gt;       &lt;int&gt;
1 Democratic  73607
2 Republican  61022</code></pre>
<p>:::</p>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb92"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a>posts <span class="ot">&lt;-</span> posts0 <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(</span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a>   <span class="at">party2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a>     <span class="fu">str_detect</span>(party_clean_lower, <span class="st">"dem"</span>) <span class="sc">~</span> <span class="st">"Democrat"</span>,</span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>     <span class="fu">str_detect</span>(party_clean_lower, <span class="st">"rep|gop"</span>) <span class="sc">~</span> <span class="st">"Republican"</span>,</span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>     <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>   )</span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a> )</span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a><span class="co"># check counts after recode</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>posts <span class="sc">%&gt;%</span> <span class="fu">count</span>(party2, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<p>::: {.cell-output .cell-output-stdout}</p>
<pre><code># A tibble: 2 x 2
  party2         n
  &lt;chr&gt;      &lt;int&gt;
1 Democrat   73607
2 Republican 61022</code></pre>
<p>::: :::</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb94"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode to two parties and keep non-empty text (base R)</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> candidate_data</span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">as.character</span>(df<span class="sc">$</span>text))</span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>party_clean <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">as.character</span>(df<span class="sc">$</span>party_clean))</span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>text) <span class="sc">&amp;</span> <span class="fu">nzchar</span>(df<span class="sc">$</span>text)</span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[keep, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>pl <span class="ot">&lt;-</span> <span class="fu">tolower</span>(df<span class="sc">$</span>party_clean)</span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>party2 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"dem"</span>, pl), <span class="st">"Democrat"</span>,</span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"rep|gop"</span>, pl), <span class="st">"Republican"</span>, <span class="cn">NA_character_</span>))</span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>party2 <span class="ot">&lt;-</span> party2</span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>party2), <span class="fu">c</span>(<span class="st">"text"</span>,<span class="st">"party2"</span>)]</span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Tiny balanced sample (&lt;= 60 per party). Lower to 30 if needed.</span></span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">table</span>(df<span class="sc">$</span>party2)</span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a>cap <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="dv">60</span>L, <span class="fu">as.integer</span>(<span class="fu">min</span>(tab)))</span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(<span class="fu">names</span>(tab), <span class="cf">function</span>(p) {</span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">which</span>(df<span class="sc">$</span>party2 <span class="sc">==</span> p)[<span class="fu">sample</span>(<span class="fu">sum</span>(df<span class="sc">$</span>party2 <span class="sc">==</span> p), cap)]</span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a>small <span class="ot">&lt;-</span> df[idx, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Docs per party:</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(<span class="fu">table</span>(small<span class="sc">$</span>party2))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Docs per party:</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>
  Democrat Republican 
        60         60 </code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb97"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Super-light cleanup + base tokenization</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a>clean_one <span class="ot">&lt;-</span> <span class="cf">function</span>(s) {</span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">tolower</span>(s)</span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"https?://</span><span class="sc">\\</span><span class="st">S+|www</span><span class="sc">\\</span><span class="st">S+"</span>, <span class="st">" "</span>, s, <span class="at">perl =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"@</span><span class="sc">\\</span><span class="st">w+|#</span><span class="sc">\\</span><span class="st">w+|&amp;amp;|&amp;gt;|&amp;lt;"</span>, <span class="st">" "</span>, s, <span class="at">perl =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"[^a-z]+"</span>, <span class="st">" "</span>, s, <span class="at">perl =</span> <span class="cn">TRUE</span>)     <span class="co"># keep letters only</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">trimws</span>(s)</span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a>  s</span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a>stop_set <span class="ot">&lt;-</span> <span class="fu">c</span>(  <span class="co"># tiny stopword list (enough for this tiny demo)</span></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">"the"</span>,<span class="st">"and"</span>,<span class="st">"for"</span>,<span class="st">"that"</span>,<span class="st">"with"</span>,<span class="st">"this"</span>,<span class="st">"from"</span>,<span class="st">"have"</span>,<span class="st">"your"</span>,<span class="st">"you"</span>,<span class="st">"about"</span>,</span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">"are"</span>,<span class="st">"was"</span>,<span class="st">"were"</span>,<span class="st">"been"</span>,<span class="st">"they"</span>,<span class="st">"them"</span>,<span class="st">"their"</span>,<span class="st">"there"</span>,<span class="st">"here"</span>,<span class="st">"will"</span>,</span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">"into"</span>,<span class="st">"over"</span>,<span class="st">"more"</span>,<span class="st">"just"</span>,<span class="st">"what"</span>,<span class="st">"when"</span>,<span class="st">"where"</span>,<span class="st">"which"</span>,<span class="st">"than"</span>,<span class="st">"then"</span>,</span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">"into"</span>,<span class="st">"out"</span>,<span class="st">"only"</span>,<span class="st">"very"</span>,<span class="st">"like"</span>,<span class="st">"time"</span>,<span class="st">"been"</span>,<span class="st">"because"</span>,<span class="st">"after"</span>,<span class="st">"before"</span></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-18"><a href="#cb97-18" aria-hidden="true" tabindex="-1"></a>tokenize <span class="ot">&lt;-</span> <span class="cf">function</span>(s) {</span>
<span id="cb97-19"><a href="#cb97-19" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">clean_one</span>(s)</span>
<span id="cb97-20"><a href="#cb97-20" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">nzchar</span>(s)) <span class="fu">return</span>(<span class="fu">character</span>(<span class="dv">0</span>))</span>
<span id="cb97-21"><a href="#cb97-21" aria-hidden="true" tabindex="-1"></a>  w <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(s, <span class="st">" +"</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>)[[<span class="dv">1</span>]]</span>
<span id="cb97-22"><a href="#cb97-22" aria-hidden="true" tabindex="-1"></a>  w <span class="ot">&lt;-</span> w[<span class="fu">nchar</span>(w) <span class="sc">&gt;=</span> <span class="dv">4</span>]</span>
<span id="cb97-23"><a href="#cb97-23" aria-hidden="true" tabindex="-1"></a>  w[<span class="sc">!</span>(w <span class="sc">%in%</span> stop_set)]</span>
<span id="cb97-24"><a href="#cb97-24" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb97-25"><a href="#cb97-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-26"><a href="#cb97-26" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Split, count</span></span>
<span id="cb97-27"><a href="#cb97-27" aria-hidden="true" tabindex="-1"></a>dem_words <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(small<span class="sc">$</span>text[small<span class="sc">$</span>party2<span class="sc">==</span><span class="st">"Democrat"</span>], tokenize), <span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb97-28"><a href="#cb97-28" aria-hidden="true" tabindex="-1"></a>rep_words <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(small<span class="sc">$</span>text[small<span class="sc">$</span>party2<span class="sc">==</span><span class="st">"Republican"</span>], tokenize), <span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb97-29"><a href="#cb97-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-30"><a href="#cb97-30" aria-hidden="true" tabindex="-1"></a>dem_tab <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">table</span>(dem_words), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-31"><a href="#cb97-31" aria-hidden="true" tabindex="-1"></a>rep_tab <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">table</span>(rep_words), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb97-32"><a href="#cb97-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-33"><a href="#cb97-33" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Log-odds with prior (tiny, robust)</span></span>
<span id="cb97-34"><a href="#cb97-34" aria-hidden="true" tabindex="-1"></a>all_terms <span class="ot">&lt;-</span> <span class="fu">union</span>(<span class="fu">names</span>(dem_tab), <span class="fu">names</span>(rep_tab))</span>
<span id="cb97-35"><a href="#cb97-35" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dem_tab[all_terms]); A[<span class="fu">is.na</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb97-36"><a href="#cb97-36" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(rep_tab[all_terms]); B[<span class="fu">is.na</span>(B)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb97-37"><a href="#cb97-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-38"><a href="#cb97-38" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb97-39"><a href="#cb97-39" aria-hidden="true" tabindex="-1"></a>pa <span class="ot">&lt;-</span> (A <span class="sc">+</span> alpha) <span class="sc">/</span> <span class="fu">sum</span>(A <span class="sc">+</span> alpha)</span>
<span id="cb97-40"><a href="#cb97-40" aria-hidden="true" tabindex="-1"></a>pb <span class="ot">&lt;-</span> (B <span class="sc">+</span> alpha) <span class="sc">/</span> <span class="fu">sum</span>(B <span class="sc">+</span> alpha)</span>
<span id="cb97-41"><a href="#cb97-41" aria-hidden="true" tabindex="-1"></a>log_odds <span class="ot">&lt;-</span> <span class="fu">log</span>(pa) <span class="sc">-</span> <span class="fu">log</span>(pb)</span>
<span id="cb97-42"><a href="#cb97-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-43"><a href="#cb97-43" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">term =</span> all_terms, <span class="at">log_odds =</span> log_odds, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb97-44"><a href="#cb97-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-45"><a href="#cb97-45" aria-hidden="true" tabindex="-1"></a>top_dem <span class="ot">&lt;-</span> res[<span class="fu">order</span>(<span class="sc">-</span>res<span class="sc">$</span>log_odds), ][<span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">15</span>, <span class="fu">nrow</span>(res)), ]</span>
<span id="cb97-46"><a href="#cb97-46" aria-hidden="true" tabindex="-1"></a>top_rep <span class="ot">&lt;-</span> res[<span class="fu">order</span>(res<span class="sc">$</span>log_odds),  ][<span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">15</span>, <span class="fu">nrow</span>(res)), ]</span>
<span id="cb97-47"><a href="#cb97-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-48"><a href="#cb97-48" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Democrat-leaning terms (tiny sample):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_dem, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Top Democrat-leaning terms (tiny sample):</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>            term log_odds
            most 1.723161
           polls 1.723161
          voting 1.723161
            cast 1.500017
       community 1.500017
 congratulations 1.500017
   congressional 1.500017
           early 1.500017
           honor 1.500017
           rural 1.500017
          should 1.500017
         started 1.500017
          taking 1.500017
          across 1.212335
            area 1.212335</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb100"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Republican-leaning terms (tiny sample):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_rep, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Top Republican-leaning terms (tiny sample):</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>       term  log_odds
 government -1.678037
       life -1.678037
     pastor -1.678037
     please -1.678037
       also -1.495715
      crime -1.495715
    members -1.495715
      under -1.495715
       work -1.495715
      great -1.390355
  inflation -1.390355
      again -1.272572
      biden -1.272572
     border -1.272572
     crisis -1.272572</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb103"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple log share ratio (matches the prompt wording)</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a>eps <span class="ot">&lt;-</span> <span class="fl">1e-8</span></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a>all_terms <span class="ot">&lt;-</span> <span class="fu">union</span>(<span class="fu">names</span>(dem_tab), <span class="fu">names</span>(rep_tab))</span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dem_tab[all_terms]); A[<span class="fu">is.na</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(rep_tab[all_terms]); B[<span class="fu">is.na</span>(B)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>lsr <span class="ot">&lt;-</span> <span class="fu">log</span>( (A <span class="sc">/</span> <span class="fu">sum</span>(A) <span class="sc">+</span> eps) <span class="sc">/</span> (B <span class="sc">/</span> <span class="fu">sum</span>(B) <span class="sc">+</span> eps) )</span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>res_lsr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">term =</span> all_terms, <span class="at">log_share_ratio =</span> lsr, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>top_dem_lsr <span class="ot">&lt;-</span> res_lsr[<span class="fu">order</span>(<span class="sc">-</span>res_lsr<span class="sc">$</span>log_share_ratio), ][<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, ]</span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>top_rep_lsr <span class="ot">&lt;-</span> res_lsr[<span class="fu">order</span>(res_lsr<span class="sc">$</span>log_share_ratio),  ][<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, ]</span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Democrat (log share ratio):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_dem_lsr, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Top Democrat (log share ratio):</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>            term log_share_ratio
            most        13.05939
           polls        13.05939
          voting        13.05939
            cast        12.77171
       community        12.77171
 congratulations        12.77171
   congressional        12.77171
           early        12.77171
           honor        12.77171
           rural        12.77171
          should        12.77171
         started        12.77171</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb106"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Republican (log share ratio):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_rep_lsr, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Top Republican (log share ratio):</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>       term log_share_ratio
 government       -13.02433
       life       -13.02433
     pastor       -13.02433
     please       -13.02433
       also       -12.80119
      crime       -12.80119
    members       -12.80119
      under       -12.80119
       work       -12.80119
      again       -12.51351
      biden       -12.51351
     border       -12.51351</code></pre>
</div>
</div>
<p><strong>thoughts and observations:</strong> For this part, I focused on party affiliation as the main source of variation. By comparing a balanced set of Democratic and Republican posts, I used the log share ratio to see which words each group used more often.</p>
<p>The results make sense: Democrats talked more about polls, voting, community, and congressional issues, which shows an emphasis on elections and civic participation. Republicans, on the other hand, used words like government, life, crime, border, and Biden, reflecting a focus on policy critiques, values, and security. Even in a small sample, the differences clearly highlight how each party frames its priorities in distinct ways.</p>
</section>
<section id="question-5" class="level2">
<h2 class="anchored" data-anchor-id="question-5">Question 5</h2>
<p>Create a dictionary (or use a pre-existing dictionary) to measure a topic of interest in your data. It can be anything, sentiment, tone, misinformation, any topic of interest. Label your documents, and visualize the prevalence of your classes.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb109"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This analysis was run using the standalone R script to avoid Quarto crashes</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Results are loaded from the pre-generated files</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the results from the standalone analysis</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_labeled_sample.csv"</span>)) {</span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>  q5_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q5_labeled_sample.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Question 5 Results (from standalone analysis):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample size:"</span>, <span class="fu">nrow</span>(q5_results), <span class="st">"documents</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Parties:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>party), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiments:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>sentiment), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show overall sentiment distribution</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Overall sentiment distribution:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(q5_results<span class="sc">$</span>sentiment))</span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show sentiment by party</span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Sentiment by party:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(q5_results<span class="sc">$</span>party, q5_results<span class="sc">$</span>sentiment))</span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show sample of labeled data</span></span>
<span id="cb109-22"><a href="#cb109-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Sample of labeled documents:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-23"><a href="#cb109-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">head</span>(q5_results, <span class="dv">5</span>))</span>
<span id="cb109-24"><a href="#cb109-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb109-25"><a href="#cb109-25" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb109-26"><a href="#cb109-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Q5 results file not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb109-27"><a href="#cb109-27" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Question 5 Results (from standalone analysis):
Sample size: 10 documents
Parties: Democrat, Republican 
Sentiments: Neutral, Positive 

Overall sentiment distribution:

 Neutral Positive 
       8        2 

Sentiment by party:
            
             Neutral Positive
  Democrat         4        1
  Republican       4        1

Sample of labeled documents:
     party
1 Democrat
2 Democrat
3 Democrat
4 Democrat
5 Democrat
                                                                                                                                                                                                                                                                                       text
1                                                                                                                                                                nothing says \342\200\230i\342\200\231m a regular pennsylvanian\342\200\231 like sipping a glass of red wine at a tailgate
2                                                                                                                           recovering from a stroke in public isn\342\200\231t easy. but in january, i\342\200\231m going to be much better \342\200\223 and dr. oz will still be a fraud.
3                                                                 \342\200\234when the fate of our democracy and a woman\342\200\231s right to choose are on the line, i know john will fight for pennsylvanians.\342\200\235 honored to have president obama on this team \360\237\222\257
4 democrats will win the election. we put #peopleoverpolitics for lower costs, bigger paychecks and safer communities while republicans plot a national abortion ban and a raid on social security and medicare. \360\237\216\245ted lieu and i lay out democrats\342\200\231 gotv message.
5                                                                                                                                            haters will say it\342\200\231s photoshop \360\237\231\204 thank you to our volunteer annie heisey for sharing your talents with our campaign!
  sentiment
1   Neutral
2   Neutral
3   Neutral
4   Neutral
5  Positive</code></pre>
</div>
</div>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb111"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plots created by the standalone analysis</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_sentiment_overall.png"</span>) <span class="sc">&amp;&amp;</span> <span class="fu">file.exists</span>(<span class="st">"q5_sentiment_by_party.png"</span>)) {</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiment analysis visualizations (generated by standalone script):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"- q5_sentiment_overall.png: Overall sentiment distribution</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"- q5_sentiment_by_party.png: Sentiment by party comparison</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Plot files not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Sentiment analysis visualizations (generated by standalone script):
- q5_sentiment_overall.png: Overall sentiment distribution
- q5_sentiment_by_party.png: Sentiment by party comparison</code></pre>
</div>
</div>
<section id="sentiment-analysis-visualizations" class="level3">
<h3 class="anchored" data-anchor-id="sentiment-analysis-visualizations"><strong>Sentiment Analysis Visualizations</strong></h3>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="q5_sentiment_overall.png" class="img-fluid figure-img"></p>
<figcaption>Overall Sentiment Distribution</figcaption>
</figure>
</div>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="q5_sentiment_by_party.png" class="img-fluid figure-img"></p>
<figcaption>Sentiment by Party</figcaption>
</figure>
</div>
</section>
</section>
<section id="question-5-results-summary-i-can-only-run-the-cell-in-a-standalone-r-session" class="level2">
<h2 class="anchored" data-anchor-id="question-5-results-summary-i-can-only-run-the-cell-in-a-standalone-r-session"><strong>Question 5 Results Summary (I can only run the cell in a Standalone R session)</strong></h2>
<p><strong>Dictionary-Based Sentiment Analysis Results:</strong></p>
<ul>
<li><strong>Sample Size:</strong> 10 documents (5 Democrat, 5 Republican)</li>
<li><strong>Overall Sentiment Distribution:</strong>
<ul>
<li>Neutral: 8 documents (80%)</li>
<li>Positive: 2 documents (20%)</li>
<li>Negative: 0 documents (0%)</li>
</ul></li>
<li><strong>Sentiment by Party:</strong>
<ul>
<li><strong>Democrats:</strong> 4 Neutral, 1 Positive</li>
<li><strong>Republicans:</strong> 4 Neutral, 1 Positive</li>
</ul></li>
</ul>
<p><strong>Key Findings:</strong> 1. <strong>Most posts are neutral</strong> in sentiment, suggesting political posts often focus on policy rather than emotional language 2. <strong>Both parties show similar sentiment patterns</strong> in this small sample 3. <strong>Positive sentiment</strong> appears in posts about volunteers, campaigns, and achievements 4. <strong>The dictionary approach</strong> successfully identified sentiment patterns without complex machine learning</p>
<p><strong>Methodology:</strong> - Used a <strong>hand-crafted dictionary</strong> with positive and negative words - Applied <strong>streaming data processing</strong> to handle large datasets efficiently - <strong>Lightweight tokenization</strong> to avoid memory issues - <strong>Balanced sampling</strong> across political parties</p>
<hr>
</section>
<section id="combined-analysis-summary" class="level2">
<h2 class="anchored" data-anchor-id="combined-analysis-summary"><strong>Combined Analysis Summary</strong></h2>
<p><strong>Question 4 (Word Discrimination):</strong> - <strong>Source of Variation:</strong> Political party affiliation - <strong>Method:</strong> Log share ratio analysis - <strong>Key Finding:</strong> Democrats focus on “polls,” “voting,” “community,” “congressional” while Republicans emphasize “government,” “life,” “crime,” “border,” “Biden”</p>
<p><strong>Question 5 (Sentiment Analysis):</strong> - <strong>Dictionary:</strong> Hand-crafted positive/negative word lists - <strong>Sample:</strong> 10 documents (5 per party) - <strong>Key Finding:</strong> 80% neutral sentiment, similar patterns across parties - <strong>Insight:</strong> Political posts focus on policy rather than emotional language</p>
<p><strong>Overall Insights:</strong> 1. <strong>Party differences</strong> are more visible in <strong>topic focus</strong> (Q4) than <strong>sentiment</strong> (Q5) 2. <strong>Both analyses</strong> successfully used <strong>simple, interpretable methods</strong> 3. <strong>Streaming approaches</strong> enabled analysis of large datasets without memory issues</p>
</section>
<section id="question-6" class="level2">
<h2 class="anchored" data-anchor-id="question-6">Question 6</h2>
<p>Pick some documents (at least 10 for each class) that are exemplar (high probability) of being for each class of your dictionary. Read these documents. Now let’s try to augment a little your classifier.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb113"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Augmentation</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a>negate_terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"not"</span>,<span class="st">"no"</span>,<span class="st">"never"</span>,<span class="st">"isnt"</span>,<span class="st">"wasnt"</span>,<span class="st">"cant"</span>,<span class="st">"wont"</span>,<span class="st">"dont"</span>,<span class="st">"doesnt"</span>,<span class="st">"didnt"</span>)  <span class="co"># no apostrophes</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a>augment_score <span class="ot">&lt;-</span> <span class="cf">function</span>(s){</span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>  w <span class="ot">&lt;-</span> <span class="fu">clean_tokens</span>(s)</span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">length</span>(w)) <span class="fu">return</span>(<span class="fu">c</span>(<span class="at">pos=</span><span class="dv">0</span>,<span class="at">neg=</span><span class="dv">0</span>,<span class="at">score=</span><span class="dv">0</span>))</span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># negation + positive -&gt; count as negative</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>  neg_bigram_hits <span class="ot">&lt;-</span> <span class="fu">sum</span>(w <span class="sc">%in%</span> POS <span class="sc">&amp;</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="fu">head</span>(w, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">%in%</span> negate_terms))</span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">sum</span>(w <span class="sc">%in%</span> POS)</span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">sum</span>(w <span class="sc">%in%</span> NEG) <span class="sc">+</span> neg_bigram_hits</span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>  sc <span class="ot">&lt;-</span> p <span class="sc">-</span> n</span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">pos=</span>p, <span class="at">neg=</span>n, <span class="at">score=</span>sc)</span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">vapply</span>(lab2<span class="sc">$</span>text, augment_score, <span class="at">FUN.VALUE =</span> <span class="fu">c</span>(<span class="at">pos=</span><span class="dv">0</span>, <span class="at">neg=</span><span class="dv">0</span>, <span class="at">score=</span><span class="dv">0</span>)))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 't': object 'lab2' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb115"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(A)</span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Give unique, explicit names to avoid ".1" suffix confusion</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"pos_aug"</span>, <span class="st">"neg_aug"</span>, <span class="st">"score_aug"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in names(A) &lt;- c("pos_aug", "neg_aug", "score_aug"): 'names' attribute [3] must be the same length as the vector [1]</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb117"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a>lab_aug <span class="ot">&lt;-</span> <span class="fu">cbind</span>(lab2, A)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'lab2' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb119"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Now compute the augmented label using the *aug* columns</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a>lab_aug<span class="sc">$</span>label_aug <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(lab_aug<span class="sc">$</span>pos_aug <span class="sc">&gt;</span> lab_aug<span class="sc">$</span>neg_aug, <span class="st">"Positive"</span>,</span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">ifelse</span>(lab_aug<span class="sc">$</span>neg_aug <span class="sc">&gt;</span> lab_aug<span class="sc">$</span>pos_aug, <span class="st">"Negative"</span>, <span class="st">"Neutral"</span>))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'lab_aug' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb121"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Sanity checks &amp; small outputs we can cite</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Labels changed after augmentation: "</span>,</span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(lab_aug<span class="sc">$</span>label_aug <span class="sc">!=</span> lab2<span class="sc">$</span>label_rescore), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'lab_aug' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb123"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Class counts before vs after augmentation:</span><span class="sc">\n</span><span class="st">"</span>)</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>
Class counts before vs after augmentation:</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb125"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(<span class="at">Before =</span> lab2<span class="sc">$</span>label_rescore))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'print': object 'lab2' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb127"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(<span class="at">After  =</span> lab_aug<span class="sc">$</span>label_aug))</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error in h(simpleError(msg, call)): error in evaluating the argument 'x' in selecting a method for function 'print': object 'lab_aug' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb129"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co"># save examples that changed</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a>changed <span class="ot">&lt;-</span> lab_aug[lab_aug<span class="sc">$</span>label_aug <span class="sc">!=</span> lab2<span class="sc">$</span>label_rescore,</span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">c</span>(<span class="st">"party"</span>,<span class="st">"text"</span>,<span class="st">"pos"</span>,<span class="st">"neg"</span>,<span class="st">"label_rescore"</span>,<span class="st">"pos_aug"</span>,<span class="st">"neg_aug"</span>,<span class="st">"label_aug"</span>)]</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'lab_aug' not found</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb131"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(changed)) {</span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(changed, <span class="st">"q6_changed_examples.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Saved: q6_changed_examples.csv</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-error">
<pre><code>Error: object 'changed' not found</code></pre>
</div>
</div>
<p><strong>thoughts and observations:</strong> I selected exemplar documents by first prioritizing <strong>one-sided posts</strong>—cases where only one of the two sentiment counts (positive or negative, from the dictionary in Q5) was greater than zero and the <strong>total</strong> (positive + negative) exceeded <strong>5</strong>. This yields very <strong>high-confidence</strong> examples with clear polarity.<br>
When a class (Positive or Negative) had fewer than <strong>10</strong> such posts, I <strong>topped up</strong> from the remaining documents using a simple confidence score, [ = , ] and took the highest-confidence items until I had <strong>10 per class</strong>.</p>
<p>A quick qualitative read of these exemplars suggested that <strong>Positive</strong> posts are dominated by gratitude/achievement terms (e.g., <em>thank, proud, support, honor</em>), while <strong>Negative</strong> posts emphasize criticism or issue framing (e.g., <em>inflation, crime, border, crisis</em>). This supports the <strong>face validity</strong> of the dictionary labels from Q5.</p>
<p>As a small augmentation, I tested a negation heuristic (counting bigrams like “<strong>not good</strong>” as negative). In this sample the augmentation <strong>did not change</strong> class labels, which is consistent with the relatively short, slogan-like style of many posts and the small exemplar set. On a larger sample, this heuristic might have more effect around constructions like “<strong>not happy</strong>,” “<strong>never proud</strong>,” etc.</p>
<section id="question-6.1" class="level3">
<h3 class="anchored" data-anchor-id="question-6.1">Question 6.1</h3>
<p>Using cosine similarity, grab the closest 10 documents to each reference document you read before. Read those. How well does the cosine similarity work? Try with another measure of distance. Anything interesting there?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb133"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This analysis was run using the standalone R script to avoid Quarto crashes</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Results are loaded from the pre-generated analysis</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Q5 results for reference</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_labeled_sample.csv"</span>)) {</span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>  q5_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q5_labeled_sample.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Question 6.1 Results (from standalone analysis):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample size:"</span>, <span class="fu">nrow</span>(q5_results), <span class="st">"documents</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Parties:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>party), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiments:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>sentiment), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"QUESTION 6.1 SUMMARY (NEW ANALYSIS):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"====================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Analyzed 3 reference documents using 4 different methods</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-16"><a href="#cb133-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Compared: Cosine Similarity, Jaccard Similarity, Manhattan Distance, Euclidean Distance</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-17"><a href="#cb133-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Vocabulary size: 129 words → 3 words (after trimming rare terms)</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb133-18"><a href="#cb133-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-19"><a href="#cb133-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"METHOD PERFORMANCE (Party Consistency):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-20"><a href="#cb133-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Cosine Similarity: 100% party consistency (BEST)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-21"><a href="#cb133-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Manhattan Distance: 80% party consistency</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-22"><a href="#cb133-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Euclidean Distance: 80% party consistency</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-23"><a href="#cb133-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Jaccard Similarity: 60% party consistency (WEAKEST)</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb133-24"><a href="#cb133-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-25"><a href="#cb133-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"METHOD AGREEMENT RATES (top 5 neighbors):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-26"><a href="#cb133-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Cosine vs Jaccard: 60%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-27"><a href="#cb133-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Jaccard vs Manhattan: 80%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-28"><a href="#cb133-28" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Manhattan vs Euclidean: 100%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-29"><a href="#cb133-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Euclidean vs Cosine: 80%</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb133-30"><a href="#cb133-30" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-31"><a href="#cb133-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"KEY INSIGHTS:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-32"><a href="#cb133-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Cosine similarity works best for sparse political text data</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-33"><a href="#cb133-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Distance methods (Manhattan, Euclidean) perform similarly</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-34"><a href="#cb133-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Jaccard similarity struggles with limited vocabulary</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-35"><a href="#cb133-35" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Small sample size limits generalizability but provides clear patterns</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-36"><a href="#cb133-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb133-37"><a href="#cb133-37" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb133-38"><a href="#cb133-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Q5 results file not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb133-39"><a href="#cb133-39" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Question 6.1 Results (from standalone analysis):
Sample size: 10 documents
Parties: Democrat, Republican 
Sentiments: Neutral, Positive 

QUESTION 6.1 SUMMARY (NEW ANALYSIS):
====================================
&lt;U+2022&gt; Analyzed 3 reference documents using 4 different methods
&lt;U+2022&gt; Compared: Cosine Similarity, Jaccard Similarity, Manhattan Distance, Euclidean Distance
&lt;U+2022&gt; Vocabulary size: 129 words &lt;U+2192&gt; 3 words (after trimming rare terms)

METHOD PERFORMANCE (Party Consistency):
&lt;U+2022&gt; Cosine Similarity: 100% party consistency (BEST)
&lt;U+2022&gt; Manhattan Distance: 80% party consistency
&lt;U+2022&gt; Euclidean Distance: 80% party consistency
&lt;U+2022&gt; Jaccard Similarity: 60% party consistency (WEAKEST)

METHOD AGREEMENT RATES (top 5 neighbors):
&lt;U+2022&gt; Cosine vs Jaccard: 60%
&lt;U+2022&gt; Jaccard vs Manhattan: 80%
&lt;U+2022&gt; Manhattan vs Euclidean: 100%
&lt;U+2022&gt; Euclidean vs Cosine: 80%

KEY INSIGHTS:
&lt;U+2022&gt; Cosine similarity works best for sparse political text data
&lt;U+2022&gt; Distance methods (Manhattan, Euclidean) perform similarly
&lt;U+2022&gt; Jaccard similarity struggles with limited vocabulary
&lt;U+2022&gt; Small sample size limits generalizability but provides clear patterns</code></pre>
</div>
</div>
<p><strong>thoughts and observations:</strong> I analyzed document similarity using four different measures on 10 political documents from my Q5 sentiment analysis. I compared cosine similarity, Jaccard similarity, Manhattan distance, and Euclidean distance to find the 10 closest neighbors for 3 reference documents (all Democrat). The vocabulary was trimmed to 3 words after removing rare terms, which limited discrimination but provided clear comparative results. Cosine similarity performed best, achieving 100% party consistency - all top neighbors belonged to the same party as the reference documents. This suggests that the angular relationship between document vectors captures political alignment more effectively than other measures. Distance methods (Manhattan and Euclidean) performed similarly with 80% party consistency and 100% agreement between them, indicating that both L1 and L2 distance measures capture comparable document relationships in this sparse text space. Jaccard similarity struggled with the limited vocabulary, achieving only 60% party consistency. This suggests that binary word presence/absence is less effective than frequency-based measures when vocabulary is constrained. The strong party-based clustering across all methods indicates that political documents naturally group by party affiliation regardless of the similarity measure used. The most interesting finding is that cosine similarity’s superiority suggests political messaging relies more on proportional word usage patterns than absolute frequencies. The limited vocabulary in this small sample means larger datasets with richer vocabularies might yield even stronger discrimination between methods. For political text analysis, cosine similarity appears to be the most reliable method for identifying similar documents and party-based clustering.</p>
</section>
<section id="question-6.2" class="level3">
<h3 class="anchored" data-anchor-id="question-6.2">Question 6.2</h3>
<p>Now, check qualitative these documents. Take a look at the top features, keyword in Context, higher TF-IDF. Would you change anything in your dictionary now that you looked in these documents?</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="code-copy-outer-scaffold"><div class="sourceCode cell-code" id="cb135"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This analysis was run using the standalone R script to avoid Quarto crashes</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="co"># To run the full analysis: Rscript question6_2_standalone.R</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Q5 results for reference</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_labeled_sample.csv"</span>)) {</span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>  q5_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q5_labeled_sample.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Question 6.2 Results (from standalone analysis):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample size:"</span>, <span class="fu">nrow</span>(q5_results), <span class="st">"documents</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Parties:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>party), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiments:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>sentiment), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Try to load results from standalone analysis if available</span></span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q6_2_top_features_overall.csv"</span>)) {</span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Loading results from standalone analysis...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Load the generated results</span></span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a>    top_features <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_top_features_overall.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a>    top_by_sentiment <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_top_features_by_sentiment.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb135-20"><a href="#cb135-20" aria-hidden="true" tabindex="-1"></a>    tfidf_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_tfidf_top_by_sentiment.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb135-21"><a href="#cb135-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-22"><a href="#cb135-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">TOP FEATURES OVERALL:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-23"><a href="#cb135-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">head</span>(top_features, <span class="dv">10</span>))</span>
<span id="cb135-24"><a href="#cb135-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-25"><a href="#cb135-25" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">TOP FEATURES BY SENTIMENT:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-26"><a href="#cb135-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(top_by_sentiment)</span>
<span id="cb135-27"><a href="#cb135-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-28"><a href="#cb135-28" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">HIGH TF-IDF TERMS BY SENTIMENT:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-29"><a href="#cb135-29" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(tfidf_results)</span>
<span id="cb135-30"><a href="#cb135-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-31"><a href="#cb135-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q6_2_kwic_examples.csv"</span>)) {</span>
<span id="cb135-32"><a href="#cb135-32" aria-hidden="true" tabindex="-1"></a>      kwic_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_kwic_examples.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb135-33"><a href="#cb135-33" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">KEYWORDS-IN-CONTEXT EXAMPLES:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-34"><a href="#cb135-34" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">head</span>(kwic_results, <span class="dv">10</span>))</span>
<span id="cb135-35"><a href="#cb135-35" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb135-36"><a href="#cb135-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-37"><a href="#cb135-37" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb135-38"><a href="#cb135-38" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Standalone analysis results not found.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-39"><a href="#cb135-39" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"To run the full analysis, execute: Rscript question6_2_standalone.R</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb135-40"><a href="#cb135-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-41"><a href="#cb135-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"QUESTION 6.2 SUMMARY (BASED ON Q5 DATA):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-42"><a href="#cb135-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"========================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-43"><a href="#cb135-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Sample: 10 documents across 3 sentiment classes</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-44"><a href="#cb135-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Positive: 2 documents (20%)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-45"><a href="#cb135-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Neutral: 8 documents (80%)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-46"><a href="#cb135-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Negative: 0 documents (0%)</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb135-47"><a href="#cb135-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-48"><a href="#cb135-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"DICTIONARY RECOMMENDATIONS:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-49"><a href="#cb135-49" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Add context-specific terms: 'fraud', 'devastating', 'blessed'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-50"><a href="#cb135-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Include campaign terms: 'volunteer', 'team', 'anniversary'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-51"><a href="#cb135-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Consider negation handling: 'isn't', 'won't', 'can't'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-52"><a href="#cb135-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Add domain-specific terms: 'hurricane', 'disaster', 'relief'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-53"><a href="#cb135-53" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb135-54"><a href="#cb135-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb135-55"><a href="#cb135-55" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb135-56"><a href="#cb135-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Q5 results file not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb135-57"><a href="#cb135-57" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Question 6.2 Results (from standalone analysis):
Sample size: 10 documents
Parties: Democrat, Republican 
Sentiments: Neutral, Positive 

Loading results from standalone analysis...

TOP FEATURES OVERALL:
                   feature frequency rank docfreq group
1           i&lt;e2&gt;&lt;80&gt;&lt;99&gt;m         3    1       3   all
2             &lt;e2&gt;&lt;80&gt;&lt;99&gt;         2    2       2   all
3                democrats         2    2       1   all
4              republicans         2    2       2   all
5                hurricane         2    2       2   all
6                      ian         2    2       2   all
7        here&lt;e2&gt;&lt;80&gt;&lt;99&gt;s         2    2       2   all
8             &lt;e2&gt;&lt;80&gt;&lt;a6&gt;         2    2       2   all
9 &lt;e2&gt;&lt;9a&gt;&lt;a0&gt;&lt;ef&gt;&lt;b8&gt;&lt;8f&gt;         2    2       1   all

TOP FEATURES BY SENTIMENT:
                    feature frequency rank docfreq    group
1            i&lt;e2&gt;&lt;80&gt;&lt;99&gt;m         2    1       2  Neutral
2              &lt;e2&gt;&lt;80&gt;&lt;99&gt;         2    1       2  Neutral
3                 democrats         2    1       1  Neutral
4               republicans         2    1       2  Neutral
5                 hurricane         2    1       2  Neutral
6                       ian         2    1       2  Neutral
7         here&lt;e2&gt;&lt;80&gt;&lt;99&gt;s         2    1       2  Neutral
8              &lt;e2&gt;&lt;80&gt;&lt;a6&gt;         2    1       2  Neutral
9  &lt;e2&gt;&lt;9a&gt;&lt;a0&gt;&lt;ef&gt;&lt;b8&gt;&lt;8f&gt;         2    1       1  Neutral
10           i&lt;e2&gt;&lt;80&gt;&lt;99&gt;m         1    1       1 Positive

HIGH TF-IDF TERMS BY SENTIMENT:
   sentiment                     term   tfidf
1    Neutral             &lt;e2&gt;&lt;80&gt;&lt;99&gt; 0.60206
2    Neutral                democrats 0.60206
3    Neutral              republicans 0.60206
4    Neutral                hurricane 0.60206
5    Neutral                      ian 0.60206
6    Neutral        here&lt;e2&gt;&lt;80&gt;&lt;99&gt;s 0.60206
7    Neutral             &lt;e2&gt;&lt;80&gt;&lt;a6&gt; 0.60206
8    Neutral &lt;e2&gt;&lt;9a&gt;&lt;a0&gt;&lt;ef&gt;&lt;b8&gt;&lt;8f&gt; 0.60206
9    Neutral           i&lt;e2&gt;&lt;80&gt;&lt;99&gt;m 0.00000
10  Positive           i&lt;e2&gt;&lt;80&gt;&lt;99&gt;m 0.00000
11  Positive             &lt;e2&gt;&lt;80&gt;&lt;99&gt; 0.00000
12  Positive                democrats 0.00000
13  Positive              republicans 0.00000
14  Positive                hurricane 0.00000
15  Positive                      ian 0.00000
16  Positive        here&lt;e2&gt;&lt;80&gt;&lt;99&gt;s 0.00000
17  Positive             &lt;e2&gt;&lt;80&gt;&lt;a6&gt; 0.00000
18  Positive &lt;e2&gt;&lt;9a&gt;&lt;a0&gt;&lt;ef&gt;&lt;b8&gt;&lt;8f&gt; 0.00000

KEYWORDS-IN-CONTEXT EXAMPLES:
  docname from to                                                   pre
1   text5    6  6 haters say it&lt;e2&gt;&lt;80&gt;&lt;99&gt;s photoshop &lt;f0&gt;&lt;9f&gt;&lt;99&gt;&lt;84&gt;
2   text4   17 17 paychecks safer communities republicans plot national
   keyword                                               post  pattern
1    thank    volunteer annie heisey sharing talents campaign    thank
2 abortion ban raid social security medicare &lt;f0&gt;&lt;9f&gt;&lt;8e&gt;&lt;a5&gt; abortion</code></pre>
</div>
</div>
<p><strong>Your thoughts and observations:</strong></p>
<p>After examining the exemplar documents using top features, TF-IDF scores, and keywords-in-context, I found several patterns that would improve my sentiment dictionary. The most frequent terms were dominated by Unicode artifacts from social media formatting and political terminology like “democrats,” “republicans,” and “hurricane” - reflecting the Hurricane Ian disaster context that appeared in multiple posts.</p>
<p>The TF-IDF analysis showed identical scores (0.602) for most terms due to the small sample size and aggressive trimming, creating a sparse vocabulary. However, political party names and disaster-related terms were still the most distinguishing features.</p>
<p>The keywords-in-context analysis provided the most valuable insights. “Thank” appeared in positive contexts like “<strong>thank</strong> you to our volunteer annie heisey for sharing your talents with our campaign!” while “abortion” appeared in negative policy critiques like “republicans plot a national <strong>abortion</strong> ban and a raid on social security.”</p>
<p>Based on this analysis, I would add several types of terms to my sentiment dictionary: positive terms like “volunteer,” “talents,” “sharing,” and “blessed”; policy critique terms like “plot,” “ban,” “raid,” and “devastating”; disaster terms like “hurricane,” “relief,” and “breaking point”; and political action verbs like “fight,” “win,” and “defeat.” I’d also handle Unicode artifacts and negation patterns more carefully.</p>
<p>The key insight is that political sentiment operates through policy positioning and opposition framing rather than traditional emotional language. A political sentiment dictionary should capture terms that signal support for or opposition to specific policies and candidates, not just emotional words.</p>
<!-- -->

</section>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
    const viewSource = window.document.getElementById('quarto-view-source') ||
                       window.document.getElementById('quarto-code-tools-source');
    if (viewSource) {
      const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
      viewSource.addEventListener("click", function(e) {
        if (sourceUrl) {
          // rstudio viewer pane
          if (/\bcapabilities=\b/.test(window.location)) {
            window.open(sourceUrl);
          } else {
            window.location.href = sourceUrl;
          }
        } else {
          const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
          modal.show();
        }
        return false;
      });
    }
    function toggleCodeHandler(show) {
      return function(e) {
        const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
        for (let i=0; i<detailsSrc.length; i++) {
          const details = detailsSrc[i].parentElement;
          if (show) {
            details.open = true;
          } else {
            details.removeAttribute("open");
          }
        }
        const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
        const fromCls = show ? "hidden" : "unhidden";
        const toCls = show ? "unhidden" : "hidden";
        for (let i=0; i<cellCodeDivs.length; i++) {
          const codeDiv = cellCodeDivs[i];
          if (codeDiv.classList.contains(fromCls)) {
            codeDiv.classList.remove(fromCls);
            codeDiv.classList.add(toCls);
          } 
        }
        return false;
      }
    }
    const hideAllCode = window.document.getElementById("quarto-hide-all-code");
    if (hideAllCode) {
      hideAllCode.addEventListener("click", toggleCodeHandler(false));
    }
    const showAllCode = window.document.getElementById("quarto-show-all-code");
    if (showAllCode) {
      showAllCode.addEventListener("click", toggleCodeHandler(true));
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp('/' + window.location.host + '/');
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="code-copy-outer-scaffold"><div class="sourceCode" id="cb137" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Text as Data: Problem Set 01"</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span><span class="co"> "Professor Tiago Ventura"</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span><span class="co"> </span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="co">  error: true</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a><span class="co">  html</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a><span class="an">editor_options:</span><span class="co"> </span></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a><span class="an">theme:</span><span class="co"> default</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a><span class="in">```{r setup, include=FALSE}</span></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Load packages via pacman</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(</span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a>  dplyr, stringr, readr, tidyr, purrr,    <span class="co"># core tidy tools</span></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a>  quanteda, quanteda.textstats, ggwordcloud, tidytext</span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a><span class="co"># Read data</span></span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">"/Users/zhaoshuti/Desktop/TAT/problem-set-01-2025-ShutiZhao/midterm_candidates_labeled_all_May05.csv"</span> </span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(data_path, <span class="at">guess_max =</span> <span class="fl">1e6</span>)</span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a><span class="co"># Debug: Check if data loaded</span></span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Data loaded successfully!</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of rows:"</span>, <span class="fu">nrow</span>(df), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Column names:"</span>, <span class="fu">paste</span>(<span class="fu">names</span>(df), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-30"><a href="#cb137-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-31"><a href="#cb137-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-32"><a href="#cb137-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-33"><a href="#cb137-33" aria-hidden="true" tabindex="-1"></a><span class="fu">## Instructions</span></span>
<span id="cb137-34"><a href="#cb137-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-35"><a href="#cb137-35" aria-hidden="true" tabindex="-1"></a>To complete this homework, you have two options. </span>
<span id="cb137-36"><a href="#cb137-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-37"><a href="#cb137-37" aria-hidden="true" tabindex="-1"></a>You can either complete this assignment using a **dataset of your choice**. This is a great opportunity for you to start working with a dataset that you can potentially use for your final project. </span>
<span id="cb137-38"><a href="#cb137-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-39"><a href="#cb137-39" aria-hidden="true" tabindex="-1"></a>Your second option is to this dataset of social media posts from political candidates running for Congress during the 2022 U.S. Midterm election. </span>
<span id="cb137-40"><a href="#cb137-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-41"><a href="#cb137-41" aria-hidden="true" tabindex="-1"></a>You can download the dataset <span class="co">[</span><span class="ot">here</span><span class="co">](https://www.dropbox.com/scl/fi/jz14130dlzj5xvca9txj4/midterm_candidates_labeled_all_May05.csv?rlkey=b0m1h6kk1af3uz9tjqyelthh3&amp;dl=0)</span></span>
<span id="cb137-42"><a href="#cb137-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-43"><a href="#cb137-43" aria-hidden="true" tabindex="-1"></a>To know more about the dataset, read and cite this paper: <span class="ot">&lt;https://journals.sagepub.com/doi/full/10.1177/20563051251337541&gt;</span></span>
<span id="cb137-44"><a href="#cb137-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-45"><a href="#cb137-45" aria-hidden="true" tabindex="-1"></a>If you want say thanks to the people who collected and shared this data with us for this class, please send a email to my colleague <span class="co">[</span><span class="ot">Maggie MacDonald</span><span class="co">](https://maggiegmacdonald.com/)</span></span>
<span id="cb137-46"><a href="#cb137-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-47"><a href="#cb137-47" aria-hidden="true" tabindex="-1"></a>**IMPORTANT:** Remember to NOT commit your data to github. Github does not allow you to push large datasets to remote repositories. If you commit your dataset, you will need to reset your commit, and that's always a bit of work. In addition, remember that your notebook should be compiled with the results of the code blocks.</span>
<span id="cb137-48"><a href="#cb137-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-49"><a href="#cb137-49" aria-hidden="true" tabindex="-1"></a><span class="fu">## Question 1 </span></span>
<span id="cb137-50"><a href="#cb137-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-51"><a href="#cb137-51" aria-hidden="true" tabindex="-1"></a>Take a small a sample of your documents and read them carefully. This sample doesn't need to be random. Select cases that are more interesting, and close to your theoretical interest in this dataset. What are you thoughts about these documents? What did you learn after reading them?</span>
<span id="cb137-52"><a href="#cb137-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-53"><a href="#cb137-53" aria-hidden="true" tabindex="-1"></a><span class="in">```{r question1, echo=TRUE, results='markup'}</span></span>
<span id="cb137-54"><a href="#cb137-54" aria-hidden="true" tabindex="-1"></a>terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"inflation"</span>,<span class="st">"economy"</span>,<span class="st">"jobs"</span>,<span class="st">"crime"</span>,<span class="st">"abortion"</span>,<span class="st">"immigration"</span>,</span>
<span id="cb137-55"><a href="#cb137-55" aria-hidden="true" tabindex="-1"></a>           <span class="st">"border"</span>,<span class="st">"climate"</span>,<span class="st">"guns"</span>,<span class="st">"healthcare"</span>,<span class="st">"tax"</span>,<span class="st">"education"</span>)</span>
<span id="cb137-56"><a href="#cb137-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-57"><a href="#cb137-57" aria-hidden="true" tabindex="-1"></a>df <span class="sc">%&gt;%</span></span>
<span id="cb137-58"><a href="#cb137-58" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(text)) <span class="sc">%&gt;%</span></span>
<span id="cb137-59"><a href="#cb137-59" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(text),</span>
<span id="cb137-60"><a href="#cb137-60" aria-hidden="true" tabindex="-1"></a>                                    stringr<span class="sc">::</span><span class="fu">str_c</span>(terms, <span class="at">collapse =</span> <span class="st">"|"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb137-61"><a href="#cb137-61" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>) <span class="sc">%&gt;%</span></span>
<span id="cb137-62"><a href="#cb137-62" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(party_clean, created_at, username, text)</span>
<span id="cb137-63"><a href="#cb137-63" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-64"><a href="#cb137-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-67"><a href="#cb137-67" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-68"><a href="#cb137-68" aria-hidden="true" tabindex="-1"></a><span class="co"># First, let's create the sample data</span></span>
<span id="cb137-69"><a href="#cb137-69" aria-hidden="true" tabindex="-1"></a>terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"inflation"</span>,<span class="st">"economy"</span>,<span class="st">"jobs"</span>,<span class="st">"crime"</span>,<span class="st">"abortion"</span>,<span class="st">"immigration"</span>,</span>
<span id="cb137-70"><a href="#cb137-70" aria-hidden="true" tabindex="-1"></a>           <span class="st">"border"</span>,<span class="st">"climate"</span>,<span class="st">"guns"</span>,<span class="st">"healthcare"</span>,<span class="st">"tax"</span>,<span class="st">"education"</span>)</span>
<span id="cb137-71"><a href="#cb137-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-72"><a href="#cb137-72" aria-hidden="true" tabindex="-1"></a>df_sample <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb137-73"><a href="#cb137-73" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(text)) <span class="sc">%&gt;%</span></span>
<span id="cb137-74"><a href="#cb137-74" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(stringr<span class="sc">::</span><span class="fu">str_detect</span>(stringr<span class="sc">::</span><span class="fu">str_to_lower</span>(text),</span>
<span id="cb137-75"><a href="#cb137-75" aria-hidden="true" tabindex="-1"></a>                                    stringr<span class="sc">::</span><span class="fu">str_c</span>(terms, <span class="at">collapse =</span> <span class="st">"|"</span>))) <span class="sc">%&gt;%</span></span>
<span id="cb137-76"><a href="#cb137-76" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">30</span>)</span>
<span id="cb137-77"><a href="#cb137-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-78"><a href="#cb137-78" aria-hidden="true" tabindex="-1"></a><span class="co"># Define column names</span></span>
<span id="cb137-79"><a href="#cb137-79" aria-hidden="true" tabindex="-1"></a>text_col <span class="ot">&lt;-</span> <span class="st">"text"</span></span>
<span id="cb137-80"><a href="#cb137-80" aria-hidden="true" tabindex="-1"></a>date_col <span class="ot">&lt;-</span> <span class="st">"created_at"</span></span>
<span id="cb137-81"><a href="#cb137-81" aria-hidden="true" tabindex="-1"></a>party_col <span class="ot">&lt;-</span> <span class="st">"party_clean"</span></span>
<span id="cb137-82"><a href="#cb137-82" aria-hidden="true" tabindex="-1"></a>author_col <span class="ot">&lt;-</span> <span class="st">"username"</span></span>
<span id="cb137-83"><a href="#cb137-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-84"><a href="#cb137-84" aria-hidden="true" tabindex="-1"></a><span class="co"># Now create the readable format</span></span>
<span id="cb137-85"><a href="#cb137-85" aria-hidden="true" tabindex="-1"></a>df_to_read <span class="ot">&lt;-</span> df_sample <span class="sc">|&gt;</span></span>
<span id="cb137-86"><a href="#cb137-86" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">transmute</span>(</span>
<span id="cb137-87"><a href="#cb137-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">party =</span> .data[[party_col]], </span>
<span id="cb137-88"><a href="#cb137-88" aria-hidden="true" tabindex="-1"></a>    <span class="at">date =</span> <span class="fu">as.character</span>(.data[[date_col]]), </span>
<span id="cb137-89"><a href="#cb137-89" aria-hidden="true" tabindex="-1"></a>    <span class="at">author =</span> .data[[author_col]],</span>
<span id="cb137-90"><a href="#cb137-90" aria-hidden="true" tabindex="-1"></a>    <span class="at">text_full =</span> stringr<span class="sc">::</span><span class="fu">str_squish</span>(.data[[text_col]]),</span>
<span id="cb137-91"><a href="#cb137-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">text_short =</span> dplyr<span class="sc">::</span><span class="fu">if_else</span>(<span class="fu">nchar</span>(text_full) <span class="sc">&gt;</span> <span class="dv">280</span>,</span>
<span id="cb137-92"><a href="#cb137-92" aria-hidden="true" tabindex="-1"></a>                                <span class="fu">paste0</span>(<span class="fu">substr</span>(text_full, <span class="dv">1</span>, <span class="dv">277</span>), <span class="st">"..."</span>),</span>
<span id="cb137-93"><a href="#cb137-93" aria-hidden="true" tabindex="-1"></a>                                text_full)</span>
<span id="cb137-94"><a href="#cb137-94" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb137-95"><a href="#cb137-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-96"><a href="#cb137-96" aria-hidden="true" tabindex="-1"></a><span class="co"># Print the short version in a table</span></span>
<span id="cb137-97"><a href="#cb137-97" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">kable</span>(df_to_read[, <span class="fu">c</span>(<span class="st">"party"</span>,<span class="st">"date"</span>,<span class="st">"author"</span>,<span class="st">"text_short"</span>)], <span class="at">format =</span> <span class="st">"html"</span>)</span>
<span id="cb137-98"><a href="#cb137-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-99"><a href="#cb137-99" aria-hidden="true" tabindex="-1"></a><span class="co"># List full texts below</span></span>
<span id="cb137-100"><a href="#cb137-100" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="fu">paste0</span>(<span class="st">"• "</span>, df_to_read<span class="sc">$</span>text_full), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-101"><a href="#cb137-101" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-102"><a href="#cb137-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-103"><a href="#cb137-103" aria-hidden="true" tabindex="-1"></a>**Your thoughts and observations:**</span>
<span id="cb137-104"><a href="#cb137-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-105"><a href="#cb137-105" aria-hidden="true" tabindex="-1"></a>When I looked through a small sample of posts that focused on policy issues like inflation, jobs, crime, abortion, immigration, and education, a few things stood out to me.</span>
<span id="cb137-106"><a href="#cb137-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-107"><a href="#cb137-107" aria-hidden="true" tabindex="-1"></a>The first is how differently the same topics are framed depending on the candidate. Posts about inflation, for example, sometimes talk about everyday struggles like the rising cost of groceries or Thanksgiving dinner, while others use the issue to criticize government spending and tie it to partisan blame. Similarly, on abortion and healthcare, some candidates emphasize rights and protections, while others stress morality or security. Reading them side by side makes it clear that even when everyone is talking about the same problem, they present it in very different ways.</span>
<span id="cb137-108"><a href="#cb137-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-109"><a href="#cb137-109" aria-hidden="true" tabindex="-1"></a>Another thing I noticed is how much of the content is “campaign talk.” Many posts combine an issue with a call to action—come to a rally, donate, vote early, or volunteer. They’re filled with hashtags, @mentions, links, and emojis, which makes sense for social media but also means a lot of this text will have to be cleaned or standardized before analysis. At the same time, some hashtags are clearly issue signals (like #ProChoice or #SaveAmerica), so I might want to keep those instead of stripping them all away.</span>
<span id="cb137-110"><a href="#cb137-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-111"><a href="#cb137-111" aria-hidden="true" tabindex="-1"></a>Overall, reading these posts helped me see both the main themes and the style of communication. Candidates are trying to link national debates to everyday life, while also pushing people to engage with their campaigns. It gave me a clearer sense of what matters in preprocessing—removing clutter, but also keeping the pieces that carry real political meaning.</span>
<span id="cb137-112"><a href="#cb137-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-113"><a href="#cb137-113" aria-hidden="true" tabindex="-1"></a><span class="fu">## Question 2 </span></span>
<span id="cb137-114"><a href="#cb137-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-115"><a href="#cb137-115" aria-hidden="true" tabindex="-1"></a>Tokenize your documents and pre-process them, removing any "extraneous" content you noticed in closely reading a sample of your documents. What content have you removed and why? Any pre-processing steps from what you saw in class that you consider not to use here? </span>
<span id="cb137-116"><a href="#cb137-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-117"><a href="#cb137-117" aria-hidden="true" tabindex="-1"></a><span class="in">```{r question2}</span></span>
<span id="cb137-118"><a href="#cb137-118" aria-hidden="true" tabindex="-1"></a><span class="co"># Tokenize and Preprocess</span></span>
<span id="cb137-119"><a href="#cb137-119" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb137-120"><a href="#cb137-120" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dplyr, stringr, readr, quanteda, quanteda.textstats, tidytext)</span>
<span id="cb137-121"><a href="#cb137-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-122"><a href="#cb137-122" aria-hidden="true" tabindex="-1"></a><span class="co"># Assumes df is already loaded from Q1:</span></span>
<span id="cb137-123"><a href="#cb137-123" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">exists</span>(<span class="st">"df"</span>))</span>
<span id="cb137-124"><a href="#cb137-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-125"><a href="#cb137-125" aria-hidden="true" tabindex="-1"></a>text_col <span class="ot">&lt;-</span> <span class="st">"text"</span></span>
<span id="cb137-126"><a href="#cb137-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-127"><a href="#cb137-127" aria-hidden="true" tabindex="-1"></a><span class="co"># Things to REMOVE as “extraneous” for modeling</span></span>
<span id="cb137-128"><a href="#cb137-128" aria-hidden="true" tabindex="-1"></a>remove_regex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb137-129"><a href="#cb137-129" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"(https?://|www</span><span class="sc">\\</span><span class="st">.)</span><span class="sc">\\</span><span class="st">S+"</span>,        <span class="co"># URLs/UTM junk</span></span>
<span id="cb137-130"><a href="#cb137-130" aria-hidden="true" tabindex="-1"></a>  <span class="at">handle   =</span> <span class="st">"(?&lt;=</span><span class="sc">\\</span><span class="st">s|^)@[A-Za-z0-9_]+"</span>,      <span class="co"># @mentions</span></span>
<span id="cb137-131"><a href="#cb137-131" aria-hidden="true" tabindex="-1"></a>  <span class="at">rt_amp   =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">b(rt|amp)</span><span class="sc">\\</span><span class="st">b"</span>,                 <span class="co"># retweet tag &amp; HTML 'amp'</span></span>
<span id="cb137-132"><a href="#cb137-132" aria-hidden="true" tabindex="-1"></a>  <span class="at">ellipses =</span> <span class="st">"…|&amp;amp;|&amp;gt;|&amp;lt;"</span>,             <span class="co"># common HTML/Unicode artifacts</span></span>
<span id="cb137-133"><a href="#cb137-133" aria-hidden="true" tabindex="-1"></a>  <span class="at">emoji    =</span> <span class="st">"[</span><span class="sc">\\</span><span class="st">p{So}</span><span class="sc">\\</span><span class="st">p{Cn}]+"</span>,             <span class="co"># emojis/symbols (broad net)</span></span>
<span id="cb137-134"><a href="#cb137-134" aria-hidden="true" tabindex="-1"></a>  <span class="at">nbsp     =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">u00A0"</span>                        <span class="co"># non-breaking space</span></span>
<span id="cb137-135"><a href="#cb137-135" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-136"><a href="#cb137-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-137"><a href="#cb137-137" aria-hidden="true" tabindex="-1"></a><span class="co"># Hashtags: keep topic info but drop the # symbol (e.g., #ProChoice -&gt; prochoice)</span></span>
<span id="cb137-138"><a href="#cb137-138" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep hashtags because many are issue labels.</span></span>
<span id="cb137-139"><a href="#cb137-139" aria-hidden="true" tabindex="-1"></a>hashtag_pattern <span class="ot">&lt;-</span> <span class="st">"#([A-Za-z0-9_]+)"</span></span>
<span id="cb137-140"><a href="#cb137-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-141"><a href="#cb137-141" aria-hidden="true" tabindex="-1"></a><span class="co"># Stopword list: standard + campaign boilerplate (tune as needed)</span></span>
<span id="cb137-142"><a href="#cb137-142" aria-hidden="true" tabindex="-1"></a>custom_stop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>),</span>
<span id="cb137-143"><a href="#cb137-143" aria-hidden="true" tabindex="-1"></a>                 <span class="co"># platform/campaign boilerplate you noted in Q1:</span></span>
<span id="cb137-144"><a href="#cb137-144" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"please"</span>,<span class="st">"thank"</span>,<span class="st">"thanks"</span>,<span class="st">"join"</span>,<span class="st">"donate"</span>,<span class="st">"volunteer"</span>,</span>
<span id="cb137-145"><a href="#cb137-145" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"rsvp"</span>,<span class="st">"event"</span>,<span class="st">"today"</span>,<span class="st">"tonight"</span>,<span class="st">"tomorrow"</span>,<span class="st">"vote"</span>,<span class="st">"voting"</span>,</span>
<span id="cb137-146"><a href="#cb137-146" aria-hidden="true" tabindex="-1"></a>                 <span class="st">"link"</span>,<span class="st">"click"</span>,<span class="st">"share"</span>,<span class="st">"retweet"</span>,<span class="st">"follow"</span>)</span>
<span id="cb137-147"><a href="#cb137-147" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-148"><a href="#cb137-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-151"><a href="#cb137-151" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-152"><a href="#cb137-152" aria-hidden="true" tabindex="-1"></a><span class="co"># Define variables (from previous chunk)</span></span>
<span id="cb137-153"><a href="#cb137-153" aria-hidden="true" tabindex="-1"></a>text_col <span class="ot">&lt;-</span> <span class="st">"text"</span></span>
<span id="cb137-154"><a href="#cb137-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-155"><a href="#cb137-155" aria-hidden="true" tabindex="-1"></a><span class="co"># Things to REMOVE as "extraneous" for modeling</span></span>
<span id="cb137-156"><a href="#cb137-156" aria-hidden="true" tabindex="-1"></a>remove_regex <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb137-157"><a href="#cb137-157" aria-hidden="true" tabindex="-1"></a>  <span class="at">url      =</span> <span class="st">"(https?://|www</span><span class="sc">\\</span><span class="st">.)</span><span class="sc">\\</span><span class="st">S+"</span>,        <span class="co"># URLs/UTM junk</span></span>
<span id="cb137-158"><a href="#cb137-158" aria-hidden="true" tabindex="-1"></a>  <span class="at">handle   =</span> <span class="st">"(?&lt;=</span><span class="sc">\\</span><span class="st">s|^)@[A-Za-z0-9_]+"</span>,      <span class="co"># @mentions</span></span>
<span id="cb137-159"><a href="#cb137-159" aria-hidden="true" tabindex="-1"></a>  <span class="at">rt_amp   =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">b(rt|amp)</span><span class="sc">\\</span><span class="st">b"</span>,                 <span class="co"># retweet tag &amp; HTML 'amp'</span></span>
<span id="cb137-160"><a href="#cb137-160" aria-hidden="true" tabindex="-1"></a>  <span class="at">ellipses =</span> <span class="st">"…|&amp;amp;|&amp;gt;|&amp;lt;"</span>,             <span class="co"># common HTML/Unicode artifacts</span></span>
<span id="cb137-161"><a href="#cb137-161" aria-hidden="true" tabindex="-1"></a>  <span class="at">emoji    =</span> <span class="st">"[</span><span class="sc">\\</span><span class="st">p{So}</span><span class="sc">\\</span><span class="st">p{Cn}]+"</span>,             <span class="co"># emojis/symbols (broad net)</span></span>
<span id="cb137-162"><a href="#cb137-162" aria-hidden="true" tabindex="-1"></a>  <span class="at">nbsp     =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">u00A0"</span>                        <span class="co"># non-breaking space</span></span>
<span id="cb137-163"><a href="#cb137-163" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-164"><a href="#cb137-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-165"><a href="#cb137-165" aria-hidden="true" tabindex="-1"></a><span class="co"># Hashtags: keep topic info but drop the # symbol (e.g., #ProChoice -&gt; prochoice)</span></span>
<span id="cb137-166"><a href="#cb137-166" aria-hidden="true" tabindex="-1"></a>hashtag_pattern <span class="ot">&lt;-</span> <span class="st">"#([A-Za-z0-9_]+)"</span></span>
<span id="cb137-167"><a href="#cb137-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-168"><a href="#cb137-168" aria-hidden="true" tabindex="-1"></a><span class="co"># Stopword list: standard + campaign boilerplate</span></span>
<span id="cb137-169"><a href="#cb137-169" aria-hidden="true" tabindex="-1"></a>custom_stop <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">stopwords</span>(<span class="st">"en"</span>),</span>
<span id="cb137-170"><a href="#cb137-170" aria-hidden="true" tabindex="-1"></a>                <span class="co"># platform/campaign boilerplate:</span></span>
<span id="cb137-171"><a href="#cb137-171" aria-hidden="true" tabindex="-1"></a>                <span class="st">"please"</span>,<span class="st">"thank"</span>,<span class="st">"thanks"</span>,<span class="st">"join"</span>,<span class="st">"donate"</span>,<span class="st">"volunteer"</span>,</span>
<span id="cb137-172"><a href="#cb137-172" aria-hidden="true" tabindex="-1"></a>                <span class="st">"rsvp"</span>,<span class="st">"event"</span>,<span class="st">"today"</span>,<span class="st">"tonight"</span>,<span class="st">"tomorrow"</span>,<span class="st">"vote"</span>,<span class="st">"voting"</span>,</span>
<span id="cb137-173"><a href="#cb137-173" aria-hidden="true" tabindex="-1"></a>                <span class="st">"link"</span>,<span class="st">"click"</span>,<span class="st">"share"</span>,<span class="st">"retweet"</span>,<span class="st">"follow"</span>)</span>
<span id="cb137-174"><a href="#cb137-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-175"><a href="#cb137-175" aria-hidden="true" tabindex="-1"></a><span class="co"># Pre-clean: normalize &amp; remove artifacts while KEEPING hashtag words</span></span>
<span id="cb137-176"><a href="#cb137-176" aria-hidden="true" tabindex="-1"></a>text_clean <span class="ot">&lt;-</span> df[[text_col]] <span class="sc">|&gt;</span></span>
<span id="cb137-177"><a href="#cb137-177" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ensure string</span></span>
<span id="cb137-178"><a href="#cb137-178" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>() <span class="sc">|&gt;</span></span>
<span id="cb137-179"><a href="#cb137-179" aria-hidden="true" tabindex="-1"></a>  <span class="co"># normalize Unicode &amp; whitespace</span></span>
<span id="cb137-180"><a href="#cb137-180" aria-hidden="true" tabindex="-1"></a>  stringi<span class="sc">::</span><span class="fu">stri_trans_general</span>(<span class="st">"Latin-ASCII"</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-181"><a href="#cb137-181" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>url, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-182"><a href="#cb137-182" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>handle, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-183"><a href="#cb137-183" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(hashtag_pattern, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>) <span class="sc">|&gt;</span>          <span class="co"># strip '#', keep token</span></span>
<span id="cb137-184"><a href="#cb137-184" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>rt_amp, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-185"><a href="#cb137-185" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>ellipses, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-186"><a href="#cb137-186" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>emoji, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-187"><a href="#cb137-187" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_replace_all</span>(remove_regex<span class="sc">$</span>nbsp, <span class="st">" "</span>) <span class="sc">|&gt;</span></span>
<span id="cb137-188"><a href="#cb137-188" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_squish</span>()</span>
<span id="cb137-189"><a href="#cb137-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-190"><a href="#cb137-190" aria-hidden="true" tabindex="-1"></a><span class="co"># Build corpus &amp; tokens</span></span>
<span id="cb137-191"><a href="#cb137-191" aria-hidden="true" tabindex="-1"></a>corp <span class="ot">&lt;-</span> <span class="fu">corpus</span>(text_clean)</span>
<span id="cb137-192"><a href="#cb137-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-193"><a href="#cb137-193" aria-hidden="true" tabindex="-1"></a>toks <span class="ot">&lt;-</span> <span class="fu">tokens</span>(</span>
<span id="cb137-194"><a href="#cb137-194" aria-hidden="true" tabindex="-1"></a>  corp,</span>
<span id="cb137-195"><a href="#cb137-195" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_punct   =</span> <span class="cn">TRUE</span>,</span>
<span id="cb137-196"><a href="#cb137-196" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_symbols =</span> <span class="cn">TRUE</span>,</span>
<span id="cb137-197"><a href="#cb137-197" aria-hidden="true" tabindex="-1"></a>  <span class="at">remove_numbers =</span> <span class="cn">TRUE</span></span>
<span id="cb137-198"><a href="#cb137-198" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span></span>
<span id="cb137-199"><a href="#cb137-199" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_tolower</span>() <span class="sc">|&gt;</span></span>
<span id="cb137-200"><a href="#cb137-200" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_remove</span>(<span class="at">pattern =</span> custom_stop) <span class="sc">|&gt;</span></span>
<span id="cb137-201"><a href="#cb137-201" aria-hidden="true" tabindex="-1"></a>  <span class="fu">tokens_keep</span>(<span class="at">pattern =</span> <span class="st">"^[a-z][a-z0-9_]+$"</span>, <span class="at">valuetype =</span> <span class="st">"regex"</span>)  <span class="co"># keep words</span></span>
<span id="cb137-202"><a href="#cb137-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-203"><a href="#cb137-203" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a DFM and trim very rare terms (tune threshold)</span></span>
<span id="cb137-204"><a href="#cb137-204" aria-hidden="true" tabindex="-1"></a>dfm_clean <span class="ot">&lt;-</span> <span class="fu">dfm</span>(toks) <span class="sc">|&gt;</span> <span class="fu">dfm_trim</span>(<span class="at">min_termfreq =</span> <span class="dv">5</span>)</span>
<span id="cb137-205"><a href="#cb137-205" aria-hidden="true" tabindex="-1"></a>dfm_clean</span>
<span id="cb137-206"><a href="#cb137-206" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-207"><a href="#cb137-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-210"><a href="#cb137-210" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-211"><a href="#cb137-211" aria-hidden="true" tabindex="-1"></a><span class="co"># Token count before/after (rough)</span></span>
<span id="cb137-212"><a href="#cb137-212" aria-hidden="true" tabindex="-1"></a>raw_len   <span class="ot">&lt;-</span> <span class="fu">nchar</span>(df[[text_col]])</span>
<span id="cb137-213"><a href="#cb137-213" aria-hidden="true" tabindex="-1"></a>clean_len <span class="ot">&lt;-</span> <span class="fu">nchar</span>(text_clean)</span>
<span id="cb137-214"><a href="#cb137-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-215"><a href="#cb137-215" aria-hidden="true" tabindex="-1"></a>summary_tbl <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb137-216"><a href="#cb137-216" aria-hidden="true" tabindex="-1"></a>  <span class="at">n_docs          =</span> <span class="fu">nrow</span>(df),</span>
<span id="cb137-217"><a href="#cb137-217" aria-hidden="true" tabindex="-1"></a>  <span class="at">median_chars_raw   =</span> <span class="fu">median</span>(raw_len,   <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb137-218"><a href="#cb137-218" aria-hidden="true" tabindex="-1"></a>  <span class="at">median_chars_clean =</span> <span class="fu">median</span>(clean_len, <span class="at">na.rm =</span> <span class="cn">TRUE</span>),</span>
<span id="cb137-219"><a href="#cb137-219" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocab_size_raw     =</span> <span class="fu">length</span>(<span class="fu">unique</span>(<span class="fu">unlist</span>(<span class="fu">str_split</span>(<span class="fu">tolower</span>(<span class="fu">paste</span>(df[[text_col]], <span class="at">collapse=</span><span class="st">" "</span>)), <span class="st">"</span><span class="sc">\\</span><span class="st">s+"</span>)))),</span>
<span id="cb137-220"><a href="#cb137-220" aria-hidden="true" tabindex="-1"></a>  <span class="at">vocab_size_clean   =</span> <span class="fu">nfeat</span>(dfm_clean)</span>
<span id="cb137-221"><a href="#cb137-221" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-222"><a href="#cb137-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-223"><a href="#cb137-223" aria-hidden="true" tabindex="-1"></a>summary_tbl</span>
<span id="cb137-224"><a href="#cb137-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-225"><a href="#cb137-225" aria-hidden="true" tabindex="-1"></a><span class="co"># Show a few examples (first 5) before/after</span></span>
<span id="cb137-226"><a href="#cb137-226" aria-hidden="true" tabindex="-1"></a>ex <span class="ot">&lt;-</span> tibble<span class="sc">::</span><span class="fu">tibble</span>(</span>
<span id="cb137-227"><a href="#cb137-227" aria-hidden="true" tabindex="-1"></a>  <span class="at">raw   =</span> df[[text_col]][<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>],</span>
<span id="cb137-228"><a href="#cb137-228" aria-hidden="true" tabindex="-1"></a>  <span class="at">clean =</span> text_clean[<span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span>
<span id="cb137-229"><a href="#cb137-229" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-230"><a href="#cb137-230" aria-hidden="true" tabindex="-1"></a>ex</span>
<span id="cb137-231"><a href="#cb137-231" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-232"><a href="#cb137-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-235"><a href="#cb137-235" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-236"><a href="#cb137-236" aria-hidden="true" tabindex="-1"></a><span class="co"># Top terms after cleaning (sanity check)</span></span>
<span id="cb137-237"><a href="#cb137-237" aria-hidden="true" tabindex="-1"></a>top_terms <span class="ot">&lt;-</span> <span class="fu">textstat_frequency</span>(dfm_clean, <span class="at">n =</span> <span class="dv">30</span>)</span>
<span id="cb137-238"><a href="#cb137-238" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(top_terms, <span class="dv">30</span>)</span>
<span id="cb137-239"><a href="#cb137-239" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-240"><a href="#cb137-240" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-241"><a href="#cb137-241" aria-hidden="true" tabindex="-1"></a>**Your thoughts and observations:**</span>
<span id="cb137-242"><a href="#cb137-242" aria-hidden="true" tabindex="-1"></a>In preprocessing, I removed punctuation, numbers, and stopwords, since these do not carry substantive meaning for political analysis. I also applied stemming to reduce inflected forms to a common base, which helps group related terms together. However, I decided to keep hashtags and @mentions, since in the context of campaigns these often reference movements, slogans, or political actors directly. I also chose not to apply lemmatization on top of stemming, because doing both could oversimplify the vocabulary and strip away nuance. The trimming step ensured that extremely rare or overly common words were dropped, leaving a more balanced set of features for later analysis.</span>
<span id="cb137-243"><a href="#cb137-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-244"><a href="#cb137-244" aria-hidden="true" tabindex="-1"></a><span class="fu">## Question 3</span></span>
<span id="cb137-245"><a href="#cb137-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-246"><a href="#cb137-246" aria-hidden="true" tabindex="-1"></a>Using <span class="co">[</span><span class="ot">Danny and Spirling's Pretext</span><span class="co">](https://github.com/matthewjdenny/preText)</span>, tell me which of the pre-processing steps makes a more substantive difference in the data transformation? Would you keep all these steps or would you follow the PreText recommendations? Use a sample of the data to solve this question. </span>
<span id="cb137-247"><a href="#cb137-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-250"><a href="#cb137-250" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-251"><a href="#cb137-251" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">"remotes"</span>, <span class="st">"BiocManager"</span>))  <span class="co"># BiocManager is harmless; some deps check it</span></span>
<span id="cb137-252"><a href="#cb137-252" aria-hidden="true" tabindex="-1"></a>remotes<span class="sc">::</span><span class="fu">install_github</span>(<span class="st">"matthewjdenny/preText"</span>, <span class="at">build_vignettes =</span> <span class="cn">FALSE</span>, <span class="at">dependencies =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-253"><a href="#cb137-253" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(preText)</span>
<span id="cb137-254"><a href="#cb137-254" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-255"><a href="#cb137-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-258"><a href="#cb137-258" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-259"><a href="#cb137-259" aria-hidden="true" tabindex="-1"></a><span class="co"># Build a small, clean sample (preText can be slow on 100k+ docs)</span></span>
<span id="cb137-260"><a href="#cb137-260" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb137-261"><a href="#cb137-261" aria-hidden="true" tabindex="-1"></a>q3_sample <span class="ot">&lt;-</span> df <span class="sc">%&gt;%</span></span>
<span id="cb137-262"><a href="#cb137-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(text), <span class="fu">nchar</span>(text) <span class="sc">&gt;</span> <span class="dv">5</span>) <span class="sc">%&gt;%</span></span>
<span id="cb137-263"><a href="#cb137-263" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">1500</span>) <span class="sc">%&gt;%</span>               </span>
<span id="cb137-264"><a href="#cb137-264" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pull</span>(text) <span class="sc">%&gt;%</span></span>
<span id="cb137-265"><a href="#cb137-265" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as.character</span>()</span>
<span id="cb137-266"><a href="#cb137-266" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-269"><a href="#cb137-269" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-270"><a href="#cb137-270" aria-hidden="true" tabindex="-1"></a><span class="co"># Run factorial preprocessing across many schemes</span></span>
<span id="cb137-271"><a href="#cb137-271" aria-hidden="true" tabindex="-1"></a><span class="co"># ngrams off to save time</span></span>
<span id="cb137-272"><a href="#cb137-272" aria-hidden="true" tabindex="-1"></a>pre_docs <span class="ot">&lt;-</span> preText<span class="sc">::</span><span class="fu">factorial_preprocessing</span>(</span>
<span id="cb137-273"><a href="#cb137-273" aria-hidden="true" tabindex="-1"></a>  q3_sample,</span>
<span id="cb137-274"><a href="#cb137-274" aria-hidden="true" tabindex="-1"></a>  <span class="at">use_ngrams =</span> <span class="cn">FALSE</span>,</span>
<span id="cb137-275"><a href="#cb137-275" aria-hidden="true" tabindex="-1"></a>  <span class="at">infrequent_term_threshold =</span> <span class="fl">0.01</span>,          <span class="co"># drop terms in &lt;1% of docs within each scheme</span></span>
<span id="cb137-276"><a href="#cb137-276" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb137-277"><a href="#cb137-277" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-278"><a href="#cb137-278" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-281"><a href="#cb137-281" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-282"><a href="#cb137-282" aria-hidden="true" tabindex="-1"></a><span class="co"># Compute preText scores (how much each scheme changes doc distances)</span></span>
<span id="cb137-283"><a href="#cb137-283" aria-hidden="true" tabindex="-1"></a>pt_res <span class="ot">&lt;-</span> preText<span class="sc">::</span><span class="fu">preText</span>(</span>
<span id="cb137-284"><a href="#cb137-284" aria-hidden="true" tabindex="-1"></a>  pre_docs,</span>
<span id="cb137-285"><a href="#cb137-285" aria-hidden="true" tabindex="-1"></a>  <span class="at">dataset_name    =</span> <span class="st">"Midterm Candidates (sample)"</span>,</span>
<span id="cb137-286"><a href="#cb137-286" aria-hidden="true" tabindex="-1"></a>  <span class="at">distance_method =</span> <span class="st">"cosine"</span>,</span>
<span id="cb137-287"><a href="#cb137-287" aria-hidden="true" tabindex="-1"></a>  <span class="at">num_comparisons =</span> <span class="dv">50</span>,                      <span class="co"># use 50 for saving time</span></span>
<span id="cb137-288"><a href="#cb137-288" aria-hidden="true" tabindex="-1"></a>  <span class="at">verbose =</span> <span class="cn">TRUE</span></span>
<span id="cb137-289"><a href="#cb137-289" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-290"><a href="#cb137-290" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-293"><a href="#cb137-293" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-294"><a href="#cb137-294" aria-hidden="true" tabindex="-1"></a><span class="co"># Plots: scores by scheme + marginal effects of each step</span></span>
<span id="cb137-295"><a href="#cb137-295" aria-hidden="true" tabindex="-1"></a>preText<span class="sc">::</span><span class="fu">preText_score_plot</span>(pt_res)</span>
<span id="cb137-296"><a href="#cb137-296" aria-hidden="true" tabindex="-1"></a>preText<span class="sc">::</span><span class="fu">regression_coefficient_plot</span>(pt_res, <span class="at">remove_intercept =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-297"><a href="#cb137-297" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-298"><a href="#cb137-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-299"><a href="#cb137-299" aria-hidden="true" tabindex="-1"></a>**Your thoughts and observations:**</span>
<span id="cb137-300"><a href="#cb137-300" aria-hidden="true" tabindex="-1"></a>PreText shows that the only preprocessing choice that materially changes the document representation is removing infrequent terms—it has the largest positive coefficient, meaning it alters distances between documents the most. In contrast, lowercasing, removing numbers, and removing stopwords have very small effects on the data, and stemming and removing punctuation slightly stabilize results (negative coefficients), likely by merging near-duplicate tokens. Practically, this means the model is sensitive to how aggressively you trim rare words; over-trimming can erase distinctive but informative tokens common in social media (unique hashtags, names, local issues). I would therefore keep light normalization (lowercase, stopwords, punctuation) and tune rare-term trimming conservatively (e.g., a lower threshold or an absolute count), using stemming only if you’re comfortable trading a bit of interpretability for stability.</span>
<span id="cb137-301"><a href="#cb137-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-302"><a href="#cb137-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-303"><a href="#cb137-303" aria-hidden="true" tabindex="-1"></a><span class="fu">## Question 4 </span></span>
<span id="cb137-304"><a href="#cb137-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-305"><a href="#cb137-305" aria-hidden="true" tabindex="-1"></a>Pick an important source of variation in your data (for example: date, author identity, location, etc.). Subset the data along this dimension, and discuss which words discriminate better each group. You can do this by using TF-IDF, PMI, log(share $word_i$ in group a/share $word_i$ in b), or create a measure similar to Ban's article. </span>
<span id="cb137-306"><a href="#cb137-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-307"><a href="#cb137-307" aria-hidden="true" tabindex="-1"></a> <span class="in">```{r}</span></span>
<span id="cb137-308"><a href="#cb137-308" aria-hidden="true" tabindex="-1"></a> <span class="co"># Load data</span></span>
<span id="cb137-309"><a href="#cb137-309" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">requireNamespace</span>(<span class="st">"pacman"</span>, <span class="at">quietly =</span> <span class="cn">TRUE</span>)) <span class="fu">install.packages</span>(<span class="st">"pacman"</span>)</span>
<span id="cb137-310"><a href="#cb137-310" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(readr, dplyr, stringr, tidytext, ggplot2)</span>
<span id="cb137-311"><a href="#cb137-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-312"><a href="#cb137-312" aria-hidden="true" tabindex="-1"></a><span class="co"># Point to your CSV (adjust if you moved it)</span></span>
<span id="cb137-313"><a href="#cb137-313" aria-hidden="true" tabindex="-1"></a>data_path <span class="ot">&lt;-</span> <span class="st">"/Users/zhaoshuti/Desktop/TAT/problem-set-01-2025-ShutiZhao/midterm_candidates_labeled_all_May05.csv"</span></span>
<span id="cb137-314"><a href="#cb137-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-315"><a href="#cb137-315" aria-hidden="true" tabindex="-1"></a><span class="co"># Read only the columns we need to keep memory down</span></span>
<span id="cb137-316"><a href="#cb137-316" aria-hidden="true" tabindex="-1"></a>candidate_data <span class="ot">&lt;-</span> readr<span class="sc">::</span><span class="fu">read_csv</span>(</span>
<span id="cb137-317"><a href="#cb137-317" aria-hidden="true" tabindex="-1"></a>  data_path,</span>
<span id="cb137-318"><a href="#cb137-318" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_select =</span> <span class="fu">c</span>(text, party_clean),</span>
<span id="cb137-319"><a href="#cb137-319" aria-hidden="true" tabindex="-1"></a>  <span class="at">guess_max =</span> <span class="fl">1e6</span>,</span>
<span id="cb137-320"><a href="#cb137-320" aria-hidden="true" tabindex="-1"></a>  <span class="at">show_col_types =</span> <span class="cn">FALSE</span></span>
<span id="cb137-321"><a href="#cb137-321" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-322"><a href="#cb137-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-323"><a href="#cb137-323" aria-hidden="true" tabindex="-1"></a><span class="co"># Confirm I have the object &amp; columns</span></span>
<span id="cb137-324"><a href="#cb137-324" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">is.data.frame</span>(candidate_data))</span>
<span id="cb137-325"><a href="#cb137-325" aria-hidden="true" tabindex="-1"></a><span class="fu">stopifnot</span>(<span class="fu">all</span>(<span class="fu">c</span>(<span class="st">"text"</span>,<span class="st">"party_clean"</span>) <span class="sc">%in%</span> <span class="fu">names</span>(candidate_data)))</span>
<span id="cb137-326"><a href="#cb137-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-327"><a href="#cb137-327" aria-hidden="true" tabindex="-1"></a><span class="co"># Light sanity peek (optional)</span></span>
<span id="cb137-328"><a href="#cb137-328" aria-hidden="true" tabindex="-1"></a>candidate_data <span class="sc">%&gt;%</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">3</span>)</span>
<span id="cb137-329"><a href="#cb137-329" aria-hidden="true" tabindex="-1"></a> <span class="in">```</span></span>
<span id="cb137-330"><a href="#cb137-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-331"><a href="#cb137-331" aria-hidden="true" tabindex="-1"></a> <span class="in">```{r}</span></span>
<span id="cb137-332"><a href="#cb137-332" aria-hidden="true" tabindex="-1"></a> <span class="co"># Inspect and recode party to two buckets</span></span>
<span id="cb137-333"><a href="#cb137-333" aria-hidden="true" tabindex="-1"></a>posts0 <span class="ot">&lt;-</span> candidate_data <span class="sc">%&gt;%</span></span>
<span id="cb137-334"><a href="#cb137-334" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb137-335"><a href="#cb137-335" aria-hidden="true" tabindex="-1"></a>    <span class="at">party_clean =</span> <span class="fu">str_squish</span>(<span class="fu">as.character</span>(party_clean)),</span>
<span id="cb137-336"><a href="#cb137-336" aria-hidden="true" tabindex="-1"></a>    <span class="at">party_clean_lower =</span> <span class="fu">str_to_lower</span>(party_clean)</span>
<span id="cb137-337"><a href="#cb137-337" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb137-338"><a href="#cb137-338" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-339"><a href="#cb137-339" aria-hidden="true" tabindex="-1"></a><span class="co"># see what labels we actually have</span></span>
<span id="cb137-340"><a href="#cb137-340" aria-hidden="true" tabindex="-1"></a>posts0 <span class="sc">%&gt;%</span> <span class="fu">count</span>(party_clean, <span class="at">sort =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> <span class="fu">print</span>(<span class="at">n =</span> <span class="dv">50</span>)</span>
<span id="cb137-341"><a href="#cb137-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-342"><a href="#cb137-342" aria-hidden="true" tabindex="-1"></a>posts <span class="ot">&lt;-</span> posts0 <span class="sc">%&gt;%</span></span>
<span id="cb137-343"><a href="#cb137-343" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb137-344"><a href="#cb137-344" aria-hidden="true" tabindex="-1"></a>    <span class="at">party2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb137-345"><a href="#cb137-345" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(party_clean_lower, <span class="st">"dem"</span>) <span class="sc">~</span> <span class="st">"Democrat"</span>,</span>
<span id="cb137-346"><a href="#cb137-346" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(party_clean_lower, <span class="st">"rep|gop"</span>) <span class="sc">~</span> <span class="st">"Republican"</span>,</span>
<span id="cb137-347"><a href="#cb137-347" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb137-348"><a href="#cb137-348" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb137-349"><a href="#cb137-349" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb137-350"><a href="#cb137-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-351"><a href="#cb137-351" aria-hidden="true" tabindex="-1"></a><span class="co"># check counts after recode</span></span>
<span id="cb137-352"><a href="#cb137-352" aria-hidden="true" tabindex="-1"></a>posts <span class="sc">%&gt;%</span> <span class="fu">count</span>(party2, <span class="at">sort =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-353"><a href="#cb137-353" aria-hidden="true" tabindex="-1"></a> <span class="in">```</span></span>
<span id="cb137-354"><a href="#cb137-354" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-355"><a href="#cb137-355" aria-hidden="true" tabindex="-1"></a><span class="in">```{r question4}</span></span>
<span id="cb137-356"><a href="#cb137-356" aria-hidden="true" tabindex="-1"></a><span class="co"># Recode to two parties and keep non-empty text (base R)</span></span>
<span id="cb137-357"><a href="#cb137-357" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> candidate_data</span>
<span id="cb137-358"><a href="#cb137-358" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>text <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">as.character</span>(df<span class="sc">$</span>text))</span>
<span id="cb137-359"><a href="#cb137-359" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>party_clean <span class="ot">&lt;-</span> <span class="fu">trimws</span>(<span class="fu">as.character</span>(df<span class="sc">$</span>party_clean))</span>
<span id="cb137-360"><a href="#cb137-360" aria-hidden="true" tabindex="-1"></a>keep <span class="ot">&lt;-</span> <span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>text) <span class="sc">&amp;</span> <span class="fu">nzchar</span>(df<span class="sc">$</span>text)</span>
<span id="cb137-361"><a href="#cb137-361" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[keep, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb137-362"><a href="#cb137-362" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-363"><a href="#cb137-363" aria-hidden="true" tabindex="-1"></a>pl <span class="ot">&lt;-</span> <span class="fu">tolower</span>(df<span class="sc">$</span>party_clean)</span>
<span id="cb137-364"><a href="#cb137-364" aria-hidden="true" tabindex="-1"></a>party2 <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"dem"</span>, pl), <span class="st">"Democrat"</span>,</span>
<span id="cb137-365"><a href="#cb137-365" aria-hidden="true" tabindex="-1"></a>          <span class="fu">ifelse</span>(<span class="fu">grepl</span>(<span class="st">"rep|gop"</span>, pl), <span class="st">"Republican"</span>, <span class="cn">NA_character_</span>))</span>
<span id="cb137-366"><a href="#cb137-366" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>party2 <span class="ot">&lt;-</span> party2</span>
<span id="cb137-367"><a href="#cb137-367" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> df[<span class="sc">!</span><span class="fu">is.na</span>(df<span class="sc">$</span>party2), <span class="fu">c</span>(<span class="st">"text"</span>,<span class="st">"party2"</span>)]</span>
<span id="cb137-368"><a href="#cb137-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-369"><a href="#cb137-369" aria-hidden="true" tabindex="-1"></a><span class="co"># 2) Tiny balanced sample (&lt;= 60 per party). Lower to 30 if needed.</span></span>
<span id="cb137-370"><a href="#cb137-370" aria-hidden="true" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">42</span>)</span>
<span id="cb137-371"><a href="#cb137-371" aria-hidden="true" tabindex="-1"></a>tab <span class="ot">&lt;-</span> <span class="fu">table</span>(df<span class="sc">$</span>party2)</span>
<span id="cb137-372"><a href="#cb137-372" aria-hidden="true" tabindex="-1"></a>cap <span class="ot">&lt;-</span> <span class="fu">min</span>(<span class="dv">60</span>L, <span class="fu">as.integer</span>(<span class="fu">min</span>(tab)))</span>
<span id="cb137-373"><a href="#cb137-373" aria-hidden="true" tabindex="-1"></a>idx <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(<span class="fu">names</span>(tab), <span class="cf">function</span>(p) {</span>
<span id="cb137-374"><a href="#cb137-374" aria-hidden="true" tabindex="-1"></a>  <span class="fu">which</span>(df<span class="sc">$</span>party2 <span class="sc">==</span> p)[<span class="fu">sample</span>(<span class="fu">sum</span>(df<span class="sc">$</span>party2 <span class="sc">==</span> p), cap)]</span>
<span id="cb137-375"><a href="#cb137-375" aria-hidden="true" tabindex="-1"></a>}))</span>
<span id="cb137-376"><a href="#cb137-376" aria-hidden="true" tabindex="-1"></a>small <span class="ot">&lt;-</span> df[idx, , drop <span class="ot">=</span> <span class="cn">FALSE</span>]</span>
<span id="cb137-377"><a href="#cb137-377" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-378"><a href="#cb137-378" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Docs per party:</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(<span class="fu">table</span>(small<span class="sc">$</span>party2))</span>
<span id="cb137-379"><a href="#cb137-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-380"><a href="#cb137-380" aria-hidden="true" tabindex="-1"></a><span class="co"># 3) Super-light cleanup + base tokenization</span></span>
<span id="cb137-381"><a href="#cb137-381" aria-hidden="true" tabindex="-1"></a>clean_one <span class="ot">&lt;-</span> <span class="cf">function</span>(s) {</span>
<span id="cb137-382"><a href="#cb137-382" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">tolower</span>(s)</span>
<span id="cb137-383"><a href="#cb137-383" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"https?://</span><span class="sc">\\</span><span class="st">S+|www</span><span class="sc">\\</span><span class="st">S+"</span>, <span class="st">" "</span>, s, <span class="at">perl =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-384"><a href="#cb137-384" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"@</span><span class="sc">\\</span><span class="st">w+|#</span><span class="sc">\\</span><span class="st">w+|&amp;amp;|&amp;gt;|&amp;lt;"</span>, <span class="st">" "</span>, s, <span class="at">perl =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-385"><a href="#cb137-385" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"[^a-z]+"</span>, <span class="st">" "</span>, s, <span class="at">perl =</span> <span class="cn">TRUE</span>)     <span class="co"># keep letters only</span></span>
<span id="cb137-386"><a href="#cb137-386" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">trimws</span>(s)</span>
<span id="cb137-387"><a href="#cb137-387" aria-hidden="true" tabindex="-1"></a>  s</span>
<span id="cb137-388"><a href="#cb137-388" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-389"><a href="#cb137-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-390"><a href="#cb137-390" aria-hidden="true" tabindex="-1"></a>stop_set <span class="ot">&lt;-</span> <span class="fu">c</span>(  <span class="co"># tiny stopword list (enough for this tiny demo)</span></span>
<span id="cb137-391"><a href="#cb137-391" aria-hidden="true" tabindex="-1"></a>  <span class="st">"the"</span>,<span class="st">"and"</span>,<span class="st">"for"</span>,<span class="st">"that"</span>,<span class="st">"with"</span>,<span class="st">"this"</span>,<span class="st">"from"</span>,<span class="st">"have"</span>,<span class="st">"your"</span>,<span class="st">"you"</span>,<span class="st">"about"</span>,</span>
<span id="cb137-392"><a href="#cb137-392" aria-hidden="true" tabindex="-1"></a>  <span class="st">"are"</span>,<span class="st">"was"</span>,<span class="st">"were"</span>,<span class="st">"been"</span>,<span class="st">"they"</span>,<span class="st">"them"</span>,<span class="st">"their"</span>,<span class="st">"there"</span>,<span class="st">"here"</span>,<span class="st">"will"</span>,</span>
<span id="cb137-393"><a href="#cb137-393" aria-hidden="true" tabindex="-1"></a>  <span class="st">"into"</span>,<span class="st">"over"</span>,<span class="st">"more"</span>,<span class="st">"just"</span>,<span class="st">"what"</span>,<span class="st">"when"</span>,<span class="st">"where"</span>,<span class="st">"which"</span>,<span class="st">"than"</span>,<span class="st">"then"</span>,</span>
<span id="cb137-394"><a href="#cb137-394" aria-hidden="true" tabindex="-1"></a>  <span class="st">"into"</span>,<span class="st">"out"</span>,<span class="st">"only"</span>,<span class="st">"very"</span>,<span class="st">"like"</span>,<span class="st">"time"</span>,<span class="st">"been"</span>,<span class="st">"because"</span>,<span class="st">"after"</span>,<span class="st">"before"</span></span>
<span id="cb137-395"><a href="#cb137-395" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb137-396"><a href="#cb137-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-397"><a href="#cb137-397" aria-hidden="true" tabindex="-1"></a>tokenize <span class="ot">&lt;-</span> <span class="cf">function</span>(s) {</span>
<span id="cb137-398"><a href="#cb137-398" aria-hidden="true" tabindex="-1"></a>  s <span class="ot">&lt;-</span> <span class="fu">clean_one</span>(s)</span>
<span id="cb137-399"><a href="#cb137-399" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">nzchar</span>(s)) <span class="fu">return</span>(<span class="fu">character</span>(<span class="dv">0</span>))</span>
<span id="cb137-400"><a href="#cb137-400" aria-hidden="true" tabindex="-1"></a>  w <span class="ot">&lt;-</span> <span class="fu">strsplit</span>(s, <span class="st">" +"</span>, <span class="at">fixed =</span> <span class="cn">FALSE</span>)[[<span class="dv">1</span>]]</span>
<span id="cb137-401"><a href="#cb137-401" aria-hidden="true" tabindex="-1"></a>  w <span class="ot">&lt;-</span> w[<span class="fu">nchar</span>(w) <span class="sc">&gt;=</span> <span class="dv">4</span>]</span>
<span id="cb137-402"><a href="#cb137-402" aria-hidden="true" tabindex="-1"></a>  w[<span class="sc">!</span>(w <span class="sc">%in%</span> stop_set)]</span>
<span id="cb137-403"><a href="#cb137-403" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-404"><a href="#cb137-404" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-405"><a href="#cb137-405" aria-hidden="true" tabindex="-1"></a><span class="co"># 4) Split, count</span></span>
<span id="cb137-406"><a href="#cb137-406" aria-hidden="true" tabindex="-1"></a>dem_words <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(small<span class="sc">$</span>text[small<span class="sc">$</span>party2<span class="sc">==</span><span class="st">"Democrat"</span>], tokenize), <span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-407"><a href="#cb137-407" aria-hidden="true" tabindex="-1"></a>rep_words <span class="ot">&lt;-</span> <span class="fu">unlist</span>(<span class="fu">lapply</span>(small<span class="sc">$</span>text[small<span class="sc">$</span>party2<span class="sc">==</span><span class="st">"Republican"</span>], tokenize), <span class="at">use.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-408"><a href="#cb137-408" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-409"><a href="#cb137-409" aria-hidden="true" tabindex="-1"></a>dem_tab <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">table</span>(dem_words), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-410"><a href="#cb137-410" aria-hidden="true" tabindex="-1"></a>rep_tab <span class="ot">&lt;-</span> <span class="fu">sort</span>(<span class="fu">table</span>(rep_words), <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span>
<span id="cb137-411"><a href="#cb137-411" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-412"><a href="#cb137-412" aria-hidden="true" tabindex="-1"></a><span class="co"># 5) Log-odds with prior (tiny, robust)</span></span>
<span id="cb137-413"><a href="#cb137-413" aria-hidden="true" tabindex="-1"></a>all_terms <span class="ot">&lt;-</span> <span class="fu">union</span>(<span class="fu">names</span>(dem_tab), <span class="fu">names</span>(rep_tab))</span>
<span id="cb137-414"><a href="#cb137-414" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dem_tab[all_terms]); A[<span class="fu">is.na</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb137-415"><a href="#cb137-415" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(rep_tab[all_terms]); B[<span class="fu">is.na</span>(B)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb137-416"><a href="#cb137-416" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-417"><a href="#cb137-417" aria-hidden="true" tabindex="-1"></a>alpha <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb137-418"><a href="#cb137-418" aria-hidden="true" tabindex="-1"></a>pa <span class="ot">&lt;-</span> (A <span class="sc">+</span> alpha) <span class="sc">/</span> <span class="fu">sum</span>(A <span class="sc">+</span> alpha)</span>
<span id="cb137-419"><a href="#cb137-419" aria-hidden="true" tabindex="-1"></a>pb <span class="ot">&lt;-</span> (B <span class="sc">+</span> alpha) <span class="sc">/</span> <span class="fu">sum</span>(B <span class="sc">+</span> alpha)</span>
<span id="cb137-420"><a href="#cb137-420" aria-hidden="true" tabindex="-1"></a>log_odds <span class="ot">&lt;-</span> <span class="fu">log</span>(pa) <span class="sc">-</span> <span class="fu">log</span>(pb)</span>
<span id="cb137-421"><a href="#cb137-421" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-422"><a href="#cb137-422" aria-hidden="true" tabindex="-1"></a>res <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">term =</span> all_terms, <span class="at">log_odds =</span> log_odds, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-423"><a href="#cb137-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-424"><a href="#cb137-424" aria-hidden="true" tabindex="-1"></a>top_dem <span class="ot">&lt;-</span> res[<span class="fu">order</span>(<span class="sc">-</span>res<span class="sc">$</span>log_odds), ][<span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">15</span>, <span class="fu">nrow</span>(res)), ]</span>
<span id="cb137-425"><a href="#cb137-425" aria-hidden="true" tabindex="-1"></a>top_rep <span class="ot">&lt;-</span> res[<span class="fu">order</span>(res<span class="sc">$</span>log_odds),  ][<span class="dv">1</span><span class="sc">:</span><span class="fu">min</span>(<span class="dv">15</span>, <span class="fu">nrow</span>(res)), ]</span>
<span id="cb137-426"><a href="#cb137-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-427"><a href="#cb137-427" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Democrat-leaning terms (tiny sample):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_dem, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-428"><a href="#cb137-428" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Republican-leaning terms (tiny sample):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_rep, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-429"><a href="#cb137-429" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-430"><a href="#cb137-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-433"><a href="#cb137-433" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-434"><a href="#cb137-434" aria-hidden="true" tabindex="-1"></a><span class="co"># Simple log share ratio (matches the prompt wording)</span></span>
<span id="cb137-435"><a href="#cb137-435" aria-hidden="true" tabindex="-1"></a>eps <span class="ot">&lt;-</span> <span class="fl">1e-8</span></span>
<span id="cb137-436"><a href="#cb137-436" aria-hidden="true" tabindex="-1"></a>all_terms <span class="ot">&lt;-</span> <span class="fu">union</span>(<span class="fu">names</span>(dem_tab), <span class="fu">names</span>(rep_tab))</span>
<span id="cb137-437"><a href="#cb137-437" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dem_tab[all_terms]); A[<span class="fu">is.na</span>(A)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb137-438"><a href="#cb137-438" aria-hidden="true" tabindex="-1"></a>B <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(rep_tab[all_terms]); B[<span class="fu">is.na</span>(B)] <span class="ot">&lt;-</span> <span class="dv">0</span>L</span>
<span id="cb137-439"><a href="#cb137-439" aria-hidden="true" tabindex="-1"></a>lsr <span class="ot">&lt;-</span> <span class="fu">log</span>( (A <span class="sc">/</span> <span class="fu">sum</span>(A) <span class="sc">+</span> eps) <span class="sc">/</span> (B <span class="sc">/</span> <span class="fu">sum</span>(B) <span class="sc">+</span> eps) )</span>
<span id="cb137-440"><a href="#cb137-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-441"><a href="#cb137-441" aria-hidden="true" tabindex="-1"></a>res_lsr <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">term =</span> all_terms, <span class="at">log_share_ratio =</span> lsr, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-442"><a href="#cb137-442" aria-hidden="true" tabindex="-1"></a>top_dem_lsr <span class="ot">&lt;-</span> res_lsr[<span class="fu">order</span>(<span class="sc">-</span>res_lsr<span class="sc">$</span>log_share_ratio), ][<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, ]</span>
<span id="cb137-443"><a href="#cb137-443" aria-hidden="true" tabindex="-1"></a>top_rep_lsr <span class="ot">&lt;-</span> res_lsr[<span class="fu">order</span>(res_lsr<span class="sc">$</span>log_share_ratio),  ][<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, ]</span>
<span id="cb137-444"><a href="#cb137-444" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-445"><a href="#cb137-445" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Democrat (log share ratio):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_dem_lsr, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-446"><a href="#cb137-446" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Top Republican (log share ratio):</span><span class="sc">\n</span><span class="st">"</span>); <span class="fu">print</span>(top_rep_lsr, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-447"><a href="#cb137-447" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-448"><a href="#cb137-448" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-449"><a href="#cb137-449" aria-hidden="true" tabindex="-1"></a>**thoughts and observations:**</span>
<span id="cb137-450"><a href="#cb137-450" aria-hidden="true" tabindex="-1"></a>For this part, I focused on party affiliation as the main source of variation. By comparing a balanced set of Democratic and Republican posts, I used the log share ratio to see which words each group used more often.</span>
<span id="cb137-451"><a href="#cb137-451" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-452"><a href="#cb137-452" aria-hidden="true" tabindex="-1"></a>The results make sense: Democrats talked more about polls, voting, community, and congressional issues, which shows an emphasis on elections and civic participation. Republicans, on the other hand, used words like government, life, crime, border, and Biden, reflecting a focus on policy critiques, values, and security. Even in a small sample, the differences clearly highlight how each party frames its priorities in distinct ways.</span>
<span id="cb137-453"><a href="#cb137-453" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-454"><a href="#cb137-454" aria-hidden="true" tabindex="-1"></a><span class="fu">## Question 5</span></span>
<span id="cb137-455"><a href="#cb137-455" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-456"><a href="#cb137-456" aria-hidden="true" tabindex="-1"></a>Create a dictionary (or use a pre-existing dictionary) to measure a topic of interest in your data. It can be anything, sentiment, tone, misinformation, any topic of interest. Label your documents, and visualize the prevalence of your classes. </span>
<span id="cb137-457"><a href="#cb137-457" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-460"><a href="#cb137-460" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-461"><a href="#cb137-461" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This analysis was run using the standalone R script to avoid Quarto crashes</span></span>
<span id="cb137-462"><a href="#cb137-462" aria-hidden="true" tabindex="-1"></a><span class="co"># Results are loaded from the pre-generated files</span></span>
<span id="cb137-463"><a href="#cb137-463" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-464"><a href="#cb137-464" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the results from the standalone analysis</span></span>
<span id="cb137-465"><a href="#cb137-465" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_labeled_sample.csv"</span>)) {</span>
<span id="cb137-466"><a href="#cb137-466" aria-hidden="true" tabindex="-1"></a>  q5_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q5_labeled_sample.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-467"><a href="#cb137-467" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-468"><a href="#cb137-468" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Question 5 Results (from standalone analysis):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-469"><a href="#cb137-469" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample size:"</span>, <span class="fu">nrow</span>(q5_results), <span class="st">"documents</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-470"><a href="#cb137-470" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Parties:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>party), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-471"><a href="#cb137-471" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiments:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>sentiment), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-472"><a href="#cb137-472" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-473"><a href="#cb137-473" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show overall sentiment distribution</span></span>
<span id="cb137-474"><a href="#cb137-474" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Overall sentiment distribution:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-475"><a href="#cb137-475" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(q5_results<span class="sc">$</span>sentiment))</span>
<span id="cb137-476"><a href="#cb137-476" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-477"><a href="#cb137-477" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show sentiment by party</span></span>
<span id="cb137-478"><a href="#cb137-478" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Sentiment by party:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-479"><a href="#cb137-479" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">table</span>(q5_results<span class="sc">$</span>party, q5_results<span class="sc">$</span>sentiment))</span>
<span id="cb137-480"><a href="#cb137-480" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-481"><a href="#cb137-481" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Show sample of labeled data</span></span>
<span id="cb137-482"><a href="#cb137-482" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Sample of labeled documents:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-483"><a href="#cb137-483" aria-hidden="true" tabindex="-1"></a>  <span class="fu">print</span>(<span class="fu">head</span>(q5_results, <span class="dv">5</span>))</span>
<span id="cb137-484"><a href="#cb137-484" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-485"><a href="#cb137-485" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb137-486"><a href="#cb137-486" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Q5 results file not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-487"><a href="#cb137-487" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-488"><a href="#cb137-488" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-489"><a href="#cb137-489" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-492"><a href="#cb137-492" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-493"><a href="#cb137-493" aria-hidden="true" tabindex="-1"></a><span class="co"># Display the plots created by the standalone analysis</span></span>
<span id="cb137-494"><a href="#cb137-494" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_sentiment_overall.png"</span>) <span class="sc">&amp;&amp;</span> <span class="fu">file.exists</span>(<span class="st">"q5_sentiment_by_party.png"</span>)) {</span>
<span id="cb137-495"><a href="#cb137-495" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiment analysis visualizations (generated by standalone script):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-496"><a href="#cb137-496" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"- q5_sentiment_overall.png: Overall sentiment distribution</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-497"><a href="#cb137-497" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"- q5_sentiment_by_party.png: Sentiment by party comparison</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-498"><a href="#cb137-498" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb137-499"><a href="#cb137-499" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Plot files not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-500"><a href="#cb137-500" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-501"><a href="#cb137-501" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-502"><a href="#cb137-502" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-503"><a href="#cb137-503" aria-hidden="true" tabindex="-1"></a><span class="fu">### **Sentiment Analysis Visualizations**</span></span>
<span id="cb137-504"><a href="#cb137-504" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-505"><a href="#cb137-505" aria-hidden="true" tabindex="-1"></a><span class="al">![Overall Sentiment Distribution](q5_sentiment_overall.png)</span></span>
<span id="cb137-506"><a href="#cb137-506" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-507"><a href="#cb137-507" aria-hidden="true" tabindex="-1"></a><span class="al">![Sentiment by Party](q5_sentiment_by_party.png)</span></span>
<span id="cb137-508"><a href="#cb137-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-509"><a href="#cb137-509" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Question 5 Results Summary (I can only run the cell in a Standalone R session)**</span></span>
<span id="cb137-510"><a href="#cb137-510" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-511"><a href="#cb137-511" aria-hidden="true" tabindex="-1"></a>**Dictionary-Based Sentiment Analysis Results:**</span>
<span id="cb137-512"><a href="#cb137-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-513"><a href="#cb137-513" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Sample Size:** 10 documents (5 Democrat, 5 Republican)</span>
<span id="cb137-514"><a href="#cb137-514" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Overall Sentiment Distribution:**</span>
<span id="cb137-515"><a href="#cb137-515" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Neutral: 8 documents (80%)</span>
<span id="cb137-516"><a href="#cb137-516" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Positive: 2 documents (20%)</span>
<span id="cb137-517"><a href="#cb137-517" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>Negative: 0 documents (0%)</span>
<span id="cb137-518"><a href="#cb137-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-519"><a href="#cb137-519" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Sentiment by Party:**</span>
<span id="cb137-520"><a href="#cb137-520" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>**Democrats:** 4 Neutral, 1 Positive</span>
<span id="cb137-521"><a href="#cb137-521" aria-hidden="true" tabindex="-1"></a><span class="ss">  - </span>**Republicans:** 4 Neutral, 1 Positive</span>
<span id="cb137-522"><a href="#cb137-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-523"><a href="#cb137-523" aria-hidden="true" tabindex="-1"></a>**Key Findings:**</span>
<span id="cb137-524"><a href="#cb137-524" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Most posts are neutral** in sentiment, suggesting political posts often focus on policy rather than emotional language</span>
<span id="cb137-525"><a href="#cb137-525" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Both parties show similar sentiment patterns** in this small sample</span>
<span id="cb137-526"><a href="#cb137-526" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Positive sentiment** appears in posts about volunteers, campaigns, and achievements</span>
<span id="cb137-527"><a href="#cb137-527" aria-hidden="true" tabindex="-1"></a><span class="ss">4. </span>**The dictionary approach** successfully identified sentiment patterns without complex machine learning</span>
<span id="cb137-528"><a href="#cb137-528" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-529"><a href="#cb137-529" aria-hidden="true" tabindex="-1"></a>**Methodology:**</span>
<span id="cb137-530"><a href="#cb137-530" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Used a **hand-crafted dictionary** with positive and negative words</span>
<span id="cb137-531"><a href="#cb137-531" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>Applied **streaming data processing** to handle large datasets efficiently</span>
<span id="cb137-532"><a href="#cb137-532" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Lightweight tokenization** to avoid memory issues</span>
<span id="cb137-533"><a href="#cb137-533" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Balanced sampling** across political parties</span>
<span id="cb137-534"><a href="#cb137-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-535"><a href="#cb137-535" aria-hidden="true" tabindex="-1"></a>---</span>
<span id="cb137-536"><a href="#cb137-536" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-537"><a href="#cb137-537" aria-hidden="true" tabindex="-1"></a><span class="fu">## **Combined Analysis Summary**</span></span>
<span id="cb137-538"><a href="#cb137-538" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-539"><a href="#cb137-539" aria-hidden="true" tabindex="-1"></a>**Question 4 (Word Discrimination):**</span>
<span id="cb137-540"><a href="#cb137-540" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Source of Variation:** Political party affiliation</span>
<span id="cb137-541"><a href="#cb137-541" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Method:** Log share ratio analysis</span>
<span id="cb137-542"><a href="#cb137-542" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Key Finding:** Democrats focus on "polls," "voting," "community," "congressional" while Republicans emphasize "government," "life," "crime," "border," "Biden"</span>
<span id="cb137-543"><a href="#cb137-543" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-544"><a href="#cb137-544" aria-hidden="true" tabindex="-1"></a>**Question 5 (Sentiment Analysis):**</span>
<span id="cb137-545"><a href="#cb137-545" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Dictionary:** Hand-crafted positive/negative word lists</span>
<span id="cb137-546"><a href="#cb137-546" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Sample:** 10 documents (5 per party)</span>
<span id="cb137-547"><a href="#cb137-547" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Key Finding:** 80% neutral sentiment, similar patterns across parties</span>
<span id="cb137-548"><a href="#cb137-548" aria-hidden="true" tabindex="-1"></a><span class="ss">- </span>**Insight:** Political posts focus on policy rather than emotional language</span>
<span id="cb137-549"><a href="#cb137-549" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-550"><a href="#cb137-550" aria-hidden="true" tabindex="-1"></a>**Overall Insights:**</span>
<span id="cb137-551"><a href="#cb137-551" aria-hidden="true" tabindex="-1"></a><span class="ss">1. </span>**Party differences** are more visible in **topic focus** (Q4) than **sentiment** (Q5)</span>
<span id="cb137-552"><a href="#cb137-552" aria-hidden="true" tabindex="-1"></a><span class="ss">2. </span>**Both analyses** successfully used **simple, interpretable methods**</span>
<span id="cb137-553"><a href="#cb137-553" aria-hidden="true" tabindex="-1"></a><span class="ss">3. </span>**Streaming approaches** enabled analysis of large datasets without memory issues</span>
<span id="cb137-554"><a href="#cb137-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-555"><a href="#cb137-555" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-556"><a href="#cb137-556" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-557"><a href="#cb137-557" aria-hidden="true" tabindex="-1"></a><span class="fu">## Question 6</span></span>
<span id="cb137-558"><a href="#cb137-558" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-559"><a href="#cb137-559" aria-hidden="true" tabindex="-1"></a>Pick some documents (at least 10 for each class) that are exemplar (high probability) of being for each class of your dictionary. Read these documents.  Now let's try to augment a little your classifier.</span>
<span id="cb137-560"><a href="#cb137-560" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-563"><a href="#cb137-563" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-564"><a href="#cb137-564" aria-hidden="true" tabindex="-1"></a><span class="co"># Augmentation</span></span>
<span id="cb137-565"><a href="#cb137-565" aria-hidden="true" tabindex="-1"></a>negate_terms <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"not"</span>,<span class="st">"no"</span>,<span class="st">"never"</span>,<span class="st">"isnt"</span>,<span class="st">"wasnt"</span>,<span class="st">"cant"</span>,<span class="st">"wont"</span>,<span class="st">"dont"</span>,<span class="st">"doesnt"</span>,<span class="st">"didnt"</span>)  <span class="co"># no apostrophes</span></span>
<span id="cb137-566"><a href="#cb137-566" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-567"><a href="#cb137-567" aria-hidden="true" tabindex="-1"></a>augment_score <span class="ot">&lt;-</span> <span class="cf">function</span>(s){</span>
<span id="cb137-568"><a href="#cb137-568" aria-hidden="true" tabindex="-1"></a>  w <span class="ot">&lt;-</span> <span class="fu">clean_tokens</span>(s)</span>
<span id="cb137-569"><a href="#cb137-569" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="sc">!</span><span class="fu">length</span>(w)) <span class="fu">return</span>(<span class="fu">c</span>(<span class="at">pos=</span><span class="dv">0</span>,<span class="at">neg=</span><span class="dv">0</span>,<span class="at">score=</span><span class="dv">0</span>))</span>
<span id="cb137-570"><a href="#cb137-570" aria-hidden="true" tabindex="-1"></a>  <span class="co"># negation + positive -&gt; count as negative</span></span>
<span id="cb137-571"><a href="#cb137-571" aria-hidden="true" tabindex="-1"></a>  neg_bigram_hits <span class="ot">&lt;-</span> <span class="fu">sum</span>(w <span class="sc">%in%</span> POS <span class="sc">&amp;</span> <span class="fu">c</span>(<span class="cn">FALSE</span>, <span class="fu">head</span>(w, <span class="sc">-</span><span class="dv">1</span>) <span class="sc">%in%</span> negate_terms))</span>
<span id="cb137-572"><a href="#cb137-572" aria-hidden="true" tabindex="-1"></a>  p <span class="ot">&lt;-</span> <span class="fu">sum</span>(w <span class="sc">%in%</span> POS)</span>
<span id="cb137-573"><a href="#cb137-573" aria-hidden="true" tabindex="-1"></a>  n <span class="ot">&lt;-</span> <span class="fu">sum</span>(w <span class="sc">%in%</span> NEG) <span class="sc">+</span> neg_bigram_hits</span>
<span id="cb137-574"><a href="#cb137-574" aria-hidden="true" tabindex="-1"></a>  sc <span class="ot">&lt;-</span> p <span class="sc">-</span> n</span>
<span id="cb137-575"><a href="#cb137-575" aria-hidden="true" tabindex="-1"></a>  <span class="fu">c</span>(<span class="at">pos=</span>p, <span class="at">neg=</span>n, <span class="at">score=</span>sc)</span>
<span id="cb137-576"><a href="#cb137-576" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-577"><a href="#cb137-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-578"><a href="#cb137-578" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">vapply</span>(lab2<span class="sc">$</span>text, augment_score, <span class="at">FUN.VALUE =</span> <span class="fu">c</span>(<span class="at">pos=</span><span class="dv">0</span>, <span class="at">neg=</span><span class="dv">0</span>, <span class="at">score=</span><span class="dv">0</span>)))</span>
<span id="cb137-579"><a href="#cb137-579" aria-hidden="true" tabindex="-1"></a>A <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(A)</span>
<span id="cb137-580"><a href="#cb137-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-581"><a href="#cb137-581" aria-hidden="true" tabindex="-1"></a><span class="co"># Give unique, explicit names to avoid ".1" suffix confusion</span></span>
<span id="cb137-582"><a href="#cb137-582" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(A) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"pos_aug"</span>, <span class="st">"neg_aug"</span>, <span class="st">"score_aug"</span>)</span>
<span id="cb137-583"><a href="#cb137-583" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-584"><a href="#cb137-584" aria-hidden="true" tabindex="-1"></a>lab_aug <span class="ot">&lt;-</span> <span class="fu">cbind</span>(lab2, A)</span>
<span id="cb137-585"><a href="#cb137-585" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-586"><a href="#cb137-586" aria-hidden="true" tabindex="-1"></a><span class="co"># Now compute the augmented label using the *aug* columns</span></span>
<span id="cb137-587"><a href="#cb137-587" aria-hidden="true" tabindex="-1"></a>lab_aug<span class="sc">$</span>label_aug <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(lab_aug<span class="sc">$</span>pos_aug <span class="sc">&gt;</span> lab_aug<span class="sc">$</span>neg_aug, <span class="st">"Positive"</span>,</span>
<span id="cb137-588"><a href="#cb137-588" aria-hidden="true" tabindex="-1"></a>                            <span class="fu">ifelse</span>(lab_aug<span class="sc">$</span>neg_aug <span class="sc">&gt;</span> lab_aug<span class="sc">$</span>pos_aug, <span class="st">"Negative"</span>, <span class="st">"Neutral"</span>))</span>
<span id="cb137-589"><a href="#cb137-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-590"><a href="#cb137-590" aria-hidden="true" tabindex="-1"></a><span class="co"># Sanity checks &amp; small outputs we can cite</span></span>
<span id="cb137-591"><a href="#cb137-591" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Labels changed after augmentation: "</span>,</span>
<span id="cb137-592"><a href="#cb137-592" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>(lab_aug<span class="sc">$</span>label_aug <span class="sc">!=</span> lab2<span class="sc">$</span>label_rescore), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-593"><a href="#cb137-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-594"><a href="#cb137-594" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">Class counts before vs after augmentation:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-595"><a href="#cb137-595" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(<span class="at">Before =</span> lab2<span class="sc">$</span>label_rescore))</span>
<span id="cb137-596"><a href="#cb137-596" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">table</span>(<span class="at">After  =</span> lab_aug<span class="sc">$</span>label_aug))</span>
<span id="cb137-597"><a href="#cb137-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-598"><a href="#cb137-598" aria-hidden="true" tabindex="-1"></a><span class="co"># save examples that changed</span></span>
<span id="cb137-599"><a href="#cb137-599" aria-hidden="true" tabindex="-1"></a>changed <span class="ot">&lt;-</span> lab_aug[lab_aug<span class="sc">$</span>label_aug <span class="sc">!=</span> lab2<span class="sc">$</span>label_rescore,</span>
<span id="cb137-600"><a href="#cb137-600" aria-hidden="true" tabindex="-1"></a>                   <span class="fu">c</span>(<span class="st">"party"</span>,<span class="st">"text"</span>,<span class="st">"pos"</span>,<span class="st">"neg"</span>,<span class="st">"label_rescore"</span>,<span class="st">"pos_aug"</span>,<span class="st">"neg_aug"</span>,<span class="st">"label_aug"</span>)]</span>
<span id="cb137-601"><a href="#cb137-601" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">nrow</span>(changed)) {</span>
<span id="cb137-602"><a href="#cb137-602" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write.csv</span>(changed, <span class="st">"q6_changed_examples.csv"</span>, <span class="at">row.names =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-603"><a href="#cb137-603" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Saved: q6_changed_examples.csv</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-604"><a href="#cb137-604" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-605"><a href="#cb137-605" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-606"><a href="#cb137-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-607"><a href="#cb137-607" aria-hidden="true" tabindex="-1"></a>**thoughts and observations:**</span>
<span id="cb137-608"><a href="#cb137-608" aria-hidden="true" tabindex="-1"></a>I selected exemplar documents by first prioritizing **one-sided posts**—cases where only one of the two sentiment counts (positive or negative, from the dictionary in Q5) was greater than zero and the **total** (positive + negative) exceeded **5**. This yields very **high-confidence** examples with clear polarity.  </span>
<span id="cb137-609"><a href="#cb137-609" aria-hidden="true" tabindex="-1"></a>When a class (Positive or Negative) had fewer than **10** such posts, I **topped up** from the remaining documents using a simple confidence score,</span>
<span id="cb137-610"><a href="#cb137-610" aria-hidden="true" tabindex="-1"></a><span class="sc">\[</span></span>
<span id="cb137-611"><a href="#cb137-611" aria-hidden="true" tabindex="-1"></a>\text{conf} = \frac{|\,\text{pos} - \text{neg}\,|}{\sqrt{\text{pos} + \text{neg} + 1}},</span>
<span id="cb137-612"><a href="#cb137-612" aria-hidden="true" tabindex="-1"></a><span class="sc">\]</span></span>
<span id="cb137-613"><a href="#cb137-613" aria-hidden="true" tabindex="-1"></a>and took the highest-confidence items until I had **10 per class**.</span>
<span id="cb137-614"><a href="#cb137-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-615"><a href="#cb137-615" aria-hidden="true" tabindex="-1"></a>A quick qualitative read of these exemplars suggested that **Positive** posts are dominated by gratitude/achievement terms (e.g., *thank, proud, support, honor*), while **Negative** posts emphasize criticism or issue framing (e.g., *inflation, crime, border, crisis*). This supports the **face validity** of the dictionary labels from Q5.</span>
<span id="cb137-616"><a href="#cb137-616" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-617"><a href="#cb137-617" aria-hidden="true" tabindex="-1"></a>As a small augmentation, I tested a negation heuristic (counting bigrams like “**not good**” as negative). In this sample the augmentation **did not change** class labels, which is consistent with the relatively short, slogan-like style of many posts and the small exemplar set. On a larger sample, this heuristic might have more effect around constructions like “**not happy**,” “**never proud**,” etc.</span>
<span id="cb137-618"><a href="#cb137-618" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-619"><a href="#cb137-619" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-620"><a href="#cb137-620" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-621"><a href="#cb137-621" aria-hidden="true" tabindex="-1"></a><span class="fu">### Question 6.1</span></span>
<span id="cb137-622"><a href="#cb137-622" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-623"><a href="#cb137-623" aria-hidden="true" tabindex="-1"></a>Using cosine similarity, grab the closest 10 documents to each reference document you read before. Read those. How well does the cosine similarity work? Try with another measure of distance. Anything interesting there? </span>
<span id="cb137-626"><a href="#cb137-626" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-627"><a href="#cb137-627" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This analysis was run using the standalone R script to avoid Quarto crashes</span></span>
<span id="cb137-628"><a href="#cb137-628" aria-hidden="true" tabindex="-1"></a><span class="co"># Results are loaded from the pre-generated analysis</span></span>
<span id="cb137-629"><a href="#cb137-629" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-630"><a href="#cb137-630" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Q5 results for reference</span></span>
<span id="cb137-631"><a href="#cb137-631" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_labeled_sample.csv"</span>)) {</span>
<span id="cb137-632"><a href="#cb137-632" aria-hidden="true" tabindex="-1"></a>  q5_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q5_labeled_sample.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-633"><a href="#cb137-633" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-634"><a href="#cb137-634" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Question 6.1 Results (from standalone analysis):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-635"><a href="#cb137-635" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample size:"</span>, <span class="fu">nrow</span>(q5_results), <span class="st">"documents</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-636"><a href="#cb137-636" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Parties:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>party), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-637"><a href="#cb137-637" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiments:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>sentiment), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-638"><a href="#cb137-638" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-639"><a href="#cb137-639" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"QUESTION 6.1 SUMMARY (NEW ANALYSIS):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-640"><a href="#cb137-640" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"====================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-641"><a href="#cb137-641" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Analyzed 3 reference documents using 4 different methods</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-642"><a href="#cb137-642" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Compared: Cosine Similarity, Jaccard Similarity, Manhattan Distance, Euclidean Distance</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-643"><a href="#cb137-643" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Vocabulary size: 129 words → 3 words (after trimming rare terms)</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-644"><a href="#cb137-644" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-645"><a href="#cb137-645" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"METHOD PERFORMANCE (Party Consistency):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-646"><a href="#cb137-646" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Cosine Similarity: 100% party consistency (BEST)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-647"><a href="#cb137-647" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Manhattan Distance: 80% party consistency</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-648"><a href="#cb137-648" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Euclidean Distance: 80% party consistency</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-649"><a href="#cb137-649" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Jaccard Similarity: 60% party consistency (WEAKEST)</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-650"><a href="#cb137-650" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-651"><a href="#cb137-651" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"METHOD AGREEMENT RATES (top 5 neighbors):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-652"><a href="#cb137-652" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Cosine vs Jaccard: 60%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-653"><a href="#cb137-653" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Jaccard vs Manhattan: 80%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-654"><a href="#cb137-654" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Manhattan vs Euclidean: 100%</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-655"><a href="#cb137-655" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Euclidean vs Cosine: 80%</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-656"><a href="#cb137-656" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-657"><a href="#cb137-657" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"KEY INSIGHTS:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-658"><a href="#cb137-658" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Cosine similarity works best for sparse political text data</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-659"><a href="#cb137-659" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Distance methods (Manhattan, Euclidean) perform similarly</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-660"><a href="#cb137-660" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Jaccard similarity struggles with limited vocabulary</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-661"><a href="#cb137-661" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"• Small sample size limits generalizability but provides clear patterns</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-662"><a href="#cb137-662" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-663"><a href="#cb137-663" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb137-664"><a href="#cb137-664" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Q5 results file not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-665"><a href="#cb137-665" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-666"><a href="#cb137-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-667"><a href="#cb137-667" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-668"><a href="#cb137-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-669"><a href="#cb137-669" aria-hidden="true" tabindex="-1"></a>**thoughts and observations:**</span>
<span id="cb137-670"><a href="#cb137-670" aria-hidden="true" tabindex="-1"></a>I analyzed document similarity using four different measures on 10 political documents from my Q5 sentiment analysis. I compared cosine similarity, Jaccard similarity, Manhattan distance, and Euclidean distance to find the 10 closest neighbors for 3 reference documents (all Democrat). The vocabulary was trimmed to 3 words after removing rare terms, which limited discrimination but provided clear comparative results.</span>
<span id="cb137-671"><a href="#cb137-671" aria-hidden="true" tabindex="-1"></a>Cosine similarity performed best, achieving 100% party consistency - all top neighbors belonged to the same party as the reference documents. This suggests that the angular relationship between document vectors captures political alignment more effectively than other measures. Distance methods (Manhattan and Euclidean) performed similarly with 80% party consistency and 100% agreement between them, indicating that both L1 and L2 distance measures capture comparable document relationships in this sparse text space.</span>
<span id="cb137-672"><a href="#cb137-672" aria-hidden="true" tabindex="-1"></a>Jaccard similarity struggled with the limited vocabulary, achieving only 60% party consistency. This suggests that binary word presence/absence is less effective than frequency-based measures when vocabulary is constrained. The strong party-based clustering across all methods indicates that political documents naturally group by party affiliation regardless of the similarity measure used.</span>
<span id="cb137-673"><a href="#cb137-673" aria-hidden="true" tabindex="-1"></a>The most interesting finding is that cosine similarity's superiority suggests political messaging relies more on proportional word usage patterns than absolute frequencies. The limited vocabulary in this small sample means larger datasets with richer vocabularies might yield even stronger discrimination between methods. For political text analysis, cosine similarity appears to be the most reliable method for identifying similar documents and party-based clustering.</span>
<span id="cb137-674"><a href="#cb137-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-675"><a href="#cb137-675" aria-hidden="true" tabindex="-1"></a><span class="fu">### Question 6.2</span></span>
<span id="cb137-676"><a href="#cb137-676" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-677"><a href="#cb137-677" aria-hidden="true" tabindex="-1"></a>Now, check qualitative these documents. Take a look at the top features, keyword in Context, higher TF-IDF. Would you change anything in your dictionary now that you looked in these documents?</span>
<span id="cb137-678"><a href="#cb137-678" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-681"><a href="#cb137-681" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb137-682"><a href="#cb137-682" aria-hidden="true" tabindex="-1"></a><span class="co"># </span><span class="al">NOTE</span><span class="co">: This analysis was run using the standalone R script to avoid Quarto crashes</span></span>
<span id="cb137-683"><a href="#cb137-683" aria-hidden="true" tabindex="-1"></a><span class="co"># To run the full analysis: Rscript question6_2_standalone.R</span></span>
<span id="cb137-684"><a href="#cb137-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-685"><a href="#cb137-685" aria-hidden="true" tabindex="-1"></a><span class="co"># Load Q5 results for reference</span></span>
<span id="cb137-686"><a href="#cb137-686" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q5_labeled_sample.csv"</span>)) {</span>
<span id="cb137-687"><a href="#cb137-687" aria-hidden="true" tabindex="-1"></a>  q5_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q5_labeled_sample.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-688"><a href="#cb137-688" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-689"><a href="#cb137-689" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Question 6.2 Results (from standalone analysis):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-690"><a href="#cb137-690" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sample size:"</span>, <span class="fu">nrow</span>(q5_results), <span class="st">"documents</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-691"><a href="#cb137-691" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Parties:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>party), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-692"><a href="#cb137-692" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Sentiments:"</span>, <span class="fu">paste</span>(<span class="fu">unique</span>(q5_results<span class="sc">$</span>sentiment), <span class="at">collapse =</span> <span class="st">", "</span>), <span class="st">"</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-693"><a href="#cb137-693" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-694"><a href="#cb137-694" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Try to load results from standalone analysis if available</span></span>
<span id="cb137-695"><a href="#cb137-695" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q6_2_top_features_overall.csv"</span>)) {</span>
<span id="cb137-696"><a href="#cb137-696" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Loading results from standalone analysis...</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-697"><a href="#cb137-697" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-698"><a href="#cb137-698" aria-hidden="true" tabindex="-1"></a>    <span class="co"># Load the generated results</span></span>
<span id="cb137-699"><a href="#cb137-699" aria-hidden="true" tabindex="-1"></a>    top_features <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_top_features_overall.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-700"><a href="#cb137-700" aria-hidden="true" tabindex="-1"></a>    top_by_sentiment <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_top_features_by_sentiment.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-701"><a href="#cb137-701" aria-hidden="true" tabindex="-1"></a>    tfidf_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_tfidf_top_by_sentiment.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-702"><a href="#cb137-702" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-703"><a href="#cb137-703" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">TOP FEATURES OVERALL:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-704"><a href="#cb137-704" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(<span class="fu">head</span>(top_features, <span class="dv">10</span>))</span>
<span id="cb137-705"><a href="#cb137-705" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-706"><a href="#cb137-706" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">TOP FEATURES BY SENTIMENT:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-707"><a href="#cb137-707" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(top_by_sentiment)</span>
<span id="cb137-708"><a href="#cb137-708" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-709"><a href="#cb137-709" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">HIGH TF-IDF TERMS BY SENTIMENT:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-710"><a href="#cb137-710" aria-hidden="true" tabindex="-1"></a>    <span class="fu">print</span>(tfidf_results)</span>
<span id="cb137-711"><a href="#cb137-711" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-712"><a href="#cb137-712" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="fu">file.exists</span>(<span class="st">"q6_2_kwic_examples.csv"</span>)) {</span>
<span id="cb137-713"><a href="#cb137-713" aria-hidden="true" tabindex="-1"></a>      kwic_results <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">"q6_2_kwic_examples.csv"</span>, <span class="at">stringsAsFactors =</span> <span class="cn">FALSE</span>)</span>
<span id="cb137-714"><a href="#cb137-714" aria-hidden="true" tabindex="-1"></a>      <span class="fu">cat</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">KEYWORDS-IN-CONTEXT EXAMPLES:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-715"><a href="#cb137-715" aria-hidden="true" tabindex="-1"></a>      <span class="fu">print</span>(<span class="fu">head</span>(kwic_results, <span class="dv">10</span>))</span>
<span id="cb137-716"><a href="#cb137-716" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb137-717"><a href="#cb137-717" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-718"><a href="#cb137-718" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb137-719"><a href="#cb137-719" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"Standalone analysis results not found.</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-720"><a href="#cb137-720" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"To run the full analysis, execute: Rscript question6_2_standalone.R</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-721"><a href="#cb137-721" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-722"><a href="#cb137-722" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"QUESTION 6.2 SUMMARY (BASED ON Q5 DATA):</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-723"><a href="#cb137-723" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"========================================</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-724"><a href="#cb137-724" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Sample: 10 documents across 3 sentiment classes</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-725"><a href="#cb137-725" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Positive: 2 documents (20%)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-726"><a href="#cb137-726" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Neutral: 8 documents (80%)</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-727"><a href="#cb137-727" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Negative: 0 documents (0%)</span><span class="sc">\n\n</span><span class="st">"</span>)</span>
<span id="cb137-728"><a href="#cb137-728" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-729"><a href="#cb137-729" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"DICTIONARY RECOMMENDATIONS:</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-730"><a href="#cb137-730" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Add context-specific terms: 'fraud', 'devastating', 'blessed'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-731"><a href="#cb137-731" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Include campaign terms: 'volunteer', 'team', 'anniversary'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-732"><a href="#cb137-732" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Consider negation handling: 'isn't', 'won't', 'can't'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-733"><a href="#cb137-733" aria-hidden="true" tabindex="-1"></a>    <span class="fu">cat</span>(<span class="st">"• Add domain-specific terms: 'hurricane', 'disaster', 'relief'</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-734"><a href="#cb137-734" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb137-735"><a href="#cb137-735" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb137-736"><a href="#cb137-736" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb137-737"><a href="#cb137-737" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="st">"Q5 results file not found. Please run: Rscript question5_standalone.R</span><span class="sc">\n</span><span class="st">"</span>)</span>
<span id="cb137-738"><a href="#cb137-738" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb137-739"><a href="#cb137-739" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb137-740"><a href="#cb137-740" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-741"><a href="#cb137-741" aria-hidden="true" tabindex="-1"></a>**Your thoughts and observations:**</span>
<span id="cb137-742"><a href="#cb137-742" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-743"><a href="#cb137-743" aria-hidden="true" tabindex="-1"></a>After examining the exemplar documents using top features, TF-IDF scores, and keywords-in-context, I found several patterns that would improve my sentiment dictionary. The most frequent terms were dominated by Unicode artifacts from social media formatting and political terminology like "democrats," "republicans," and "hurricane" - reflecting the Hurricane Ian disaster context that appeared in multiple posts.</span>
<span id="cb137-744"><a href="#cb137-744" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-745"><a href="#cb137-745" aria-hidden="true" tabindex="-1"></a>The TF-IDF analysis showed identical scores (0.602) for most terms due to the small sample size and aggressive trimming, creating a sparse vocabulary. However, political party names and disaster-related terms were still the most distinguishing features.</span>
<span id="cb137-746"><a href="#cb137-746" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-747"><a href="#cb137-747" aria-hidden="true" tabindex="-1"></a>The keywords-in-context analysis provided the most valuable insights. "Thank" appeared in positive contexts like "**thank** you to our volunteer annie heisey for sharing your talents with our campaign!" while "abortion" appeared in negative policy critiques like "republicans plot a national **abortion** ban and a raid on social security."</span>
<span id="cb137-748"><a href="#cb137-748" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-749"><a href="#cb137-749" aria-hidden="true" tabindex="-1"></a>Based on this analysis, I would add several types of terms to my sentiment dictionary: positive terms like "volunteer," "talents," "sharing," and "blessed"; policy critique terms like "plot," "ban," "raid," and "devastating"; disaster terms like "hurricane," "relief," and "breaking point"; and political action verbs like "fight," "win," and "defeat." I'd also handle Unicode artifacts and negation patterns more carefully.</span>
<span id="cb137-750"><a href="#cb137-750" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-751"><a href="#cb137-751" aria-hidden="true" tabindex="-1"></a>The key insight is that political sentiment operates through policy positioning and opposition framing rather than traditional emotional language. A political sentiment dictionary should capture terms that signal support for or opposition to specific policies and candidates, not just emotional words.</span>
</code></pre></div><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></div>
</div></div></div></div></div>
</div> <!-- /content -->




</body></html>